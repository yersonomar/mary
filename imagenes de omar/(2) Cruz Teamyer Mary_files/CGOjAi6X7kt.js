/*!CK:3142620819!*//*1457548006,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["SwO+F"]); }

__d("ChatSidebarSections",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={MORE_ONLINE_FRIENDS:"more_online_friends",MORE_ONLINE_COWORKERS:"more_online_coworkers",OFFLINE_USERS:"offline_users",ORDERED_LIST:"ordered_list",ORDERED_COWORKERS:"ordered_coworkers",TYPEAHEAD:"typeahead",NOW_PINNED_LIST:"now_pinned_list"};},null);
__d('AsyncLoader',['AsyncRequest','BaseAsyncLoader'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){this._endpoint=i;this._type=j;}Object.assign(h.prototype,c('BaseAsyncLoader').prototype);h.prototype.send=function(i,j,k,l,m){new (c('AsyncRequest'))(i).setData({ids:j}).setHandler(l).setErrorHandler(m).setAllowCrossPageTransition(true).setMethod('GET').setReadOnly(true).send();};f.exports=h;},null);
__d('BuddyListNub',['csx','cx','fbt','Arbiter','AsyncRequest','AvailableList','BootloadedComponent.react','ChannelConnection','ChannelConstants','ChatOptions','ChatSidebarActions','ChatSidebarStore','ChatSidebarVisibility','ChatVisibility','CSS','Dock','DOM','Event','JSLogger','JSResource','KeyEventController','Keys','NubController','OrderedFriendsList','Parent','PresencePrivacy','PresenceStatus','PresenceUtil','React','ReactDOM','Run','SidebarType','Style','Toggler','emptyFunction','setTimeoutAcrossTransitions'],function a(b,c,d,e,f,g,h,i,j){var k,l;if(c.__markCompiled)c.__markCompiled();var m=40,n=253,o='285px',p=c('JSLogger').create('buddylist_nub');k=babelHelpers.inherits(q,c('NubController'));l=k&&k.prototype;function q(r,s,t,u){'use strict';l.constructor.call(this);l.init.call(this,r);this.root=r;this.orderedList=s;this.button=c('DOM').find(r,'a.fbNubButton');this.unreadCount=c('DOM').find(r,"span._5ayx");this.label=c('DOM').find(r,'span.label');this.body=c('DOM').scry(r,'div.fbNubFlyoutBody')[0];this.container=c('Parent').bySelector(r,"._56ox");var v=c('DOM').find(r,'div.fbNubFlyoutTitlebar');c('Toggler').createInstance(v).setSticky(false);c('Toggler').createInstance(r).setSticky(true);if(u)c('Run').onAfterLoad(function(){this.dropdown=c('ReactDOM').render(c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('ChatSidebarDropdown.react'),onToggleSidebar:function(){},sidebarType:c('SidebarType').BUDDYLIST}),u);}.bind(this));s.subscribeOnce('render',this.flyoutContentChanged.bind(this));c('Run').onAfterLoad(function(){var w=c('DOM').find(v,"div._4k48");if(w)c('ReactDOM').render(c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('ChatSidebarComposeLink.react'),className:"_3a-4"}),w);var x=c('DOM').find(this.button,"div._1us9");if(x)c('ReactDOM').render(c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('ChatSidebarComposeLink.react'),className:"_3a-4"}),x);var y=c('DOM').find(this.button,"div._1usa");if(y)c('ReactDOM').render(c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('ChatSidebarDropdown.react'),onToggleSidebar:function(){},sidebarType:c('SidebarType').BUDDYLIST_NUB}),y);}.bind(this));s.setScrollContainer(this.body);c('AvailableList').subscribe('buddylist/availability-changed',this._updateCount.bind(this));c('Arbiter').subscribe('chat/connect',this._handleConnect.bind(this));c('Arbiter').subscribe('chat/option-changed',function(w,x){if(x.name=='hide_groups'){this.onResize();}else if(x.name==='hide_buddylist')x.value?this.hide():this.show();}.bind(this));c('PresencePrivacy').subscribe('privacy-user-presence-changed',this._handleVisibilityChange.bind(this));this.message=c('DOM').find(r,"div._4mq1");this.warningMsgText=null;this.warningMsgEventListener=null;this.showWarningTimeout=null;c('ChannelConnection').subscribe(c('ChannelConnection').CONNECTED,this._handleChannelConnected.bind(this));c('ChannelConnection').subscribe(c('ChannelConnection').SHUTDOWN,this._handleChannelShutdown.bind(this));c('ChannelConnection').subscribe(c('ChannelConnection').RECONNECTING,this._handleChannelReconnecting.bind(this));c('ChannelConnection').subscribe([c('ChannelConnection').MUTE_WARNING,c('ChannelConnection').UNMUTE_WARNING],this._updateView.bind(this));this.subscribe('show',this.onShow.bind(this));this.subscribe('hide',this.onHide.bind(this));this.subscribe('resize',this.onResize.bind(this));c('Event').listen(r,'keydown',this._onKeyDown.bind(this));c('Event').listen(this.button,'click',this.onButtonClick.bind(this));c('KeyEventController').registerKey('q',function(event){if(!(this._isOpen)){this.onButtonClick();this.show();}event.prevent();}.bind(this));c('Arbiter').subscribe('minisidebar/show',this.hide.bind(this));c('Arbiter').subscribe('sidebar/visibility',function(w,x){if(x){this.hide();}else this._onSidebarHide();}.bind(this));this._orderedListCount=c('OrderedFriendsList').getList().length;c('Style').set(this.body,'min-height',o);c('Arbiter').subscribe('sidebar/typeahead/active',function(w,x){if(x){this._typeaheadActive=true;c('CSS').hide(this.body.parentNode);this.orderedList.hide();this.onResize();}else{this._typeaheadActive=false;this.onResize();c('CSS').show(this.body.parentNode);this.orderedList.show();}}.bind(this));if(c('ChatSidebarStore').isEnabled()&&c('ChatSidebarStore').getVisibleType()===c('SidebarType').BUDDYLIST&&!c('ChatOptions').getSetting('hide_buddylist')&&!c('ChannelConnection').disconnected()&&!c('PresencePrivacy').isUserOffline()&&this._orderedListCount>0)this.show();c('Event').listen(v,'click',function(w){if(c('CSS').hasClass(w.target,"titlebarTextWrapper"))this._syncHideBuddylist(true);}.bind(this));this._handleVisibilityChange();p.log('buddylist_initialized');}q.prototype._handleConnect=function(r){'use strict';this._updateView(true);};q.prototype._getShutdownReason=function(r){'use strict';switch(r){case c('ChannelConstants').HINT_AUTH:return j._("Se ha superado el tiempo de espera de la sesi\u00f3n. Por favor, vuelve a iniciar sesi\u00f3n.");case c('ChannelConstants').HINT_CONN:return j._("El {Chat} de Facebook no est\u00e1 disponible por el momento.",[j.param('Chat',j._("Chat"))]);case c('ChannelConstants').HINT_MAINT:return j._("El {Chat} de Facebook no est\u00e1 disponible por mantenimiento.",[j.param('Chat',j._("Chat"))]);default:return j._("El {Chat} de Facebook no est\u00e1 disponible por el momento.",[j.param('Chat',j._("Chat"))]);}};q.prototype._getReconnectMsg=function(r){'use strict';var s;if(r===null||false===navigator.onLine){s=j._("No es posible conectar con el chat. Comprueba tu conexi\u00f3n a internet.");}else if(r>c('ChannelConstants').WARNING_COUNTDOWN_THRESHOLD_MSEC){var t=c('DOM').create('a',{href:'#',className:'fbChatReconnectLink'},j._("Volver a intentarlo")),u=c('DOM').create('div',null,t);s=c('DOM').create('div',{},j._("No se puede conectar al chat."));c('DOM').appendContent(s,u);}else if(r>1000){s=j._("No es posible conectar con el chat. Nuevo intento de conexi\u00f3n en {seconds} segundos...",[j.param('seconds',Math.floor(r/1000))]);}else s=j._("No es posible conectar con el chat. Volviendo a conectar...");return s;};q.prototype._resetShowWarningTimeout=function(){'use strict';if(this.showWarningTimeout){clearTimeout(this.showWarningTimeout);this.showWarningTimeout=null;}};q.prototype._handleChannelConnected=function(r){'use strict';this._resetShowWarningTimeout();if(this.orderedList.isVisible())c('ChatVisibility').goOnline();this.warningMsgText=null;this._updateView();};q.prototype._handleChannelShutdown=function(r,s){'use strict';this._resetShowWarningTimeout();this.warningMsgText=this._getShutdownReason(s);this._updateView();};q.prototype._handleChannelReconnecting=function(r,s){'use strict';this._resetShowWarningTimeout();this.warningMsgText=this._getReconnectMsg(s);if(s>1000){if(s>c('ChannelConstants').WARNING_COUNTDOWN_THRESHOLD_MSEC){if(this.warningMsgEventListener){this.warningMsgEventListener.remove();this.warningMsgEventListener=null;}this.warningMsgEventListener=c('Event').listen(this.message,'click',function(event){if(c('CSS').hasClass(event.getTarget(),'fbChatReconnectLink')){this._tryReconnect();event.kill();}}.bind(this));}this.showWarningTimeout=c('setTimeoutAcrossTransitions')(this._handleChannelReconnecting.bind(this,r,s-1000),1000);}this._updateView();};q.prototype._tryReconnect=function(){'use strict';if(c('ChannelConnection').disconnected())c('ChannelConnection').reconnect();};q.prototype._handleVisibilityChange=function(){'use strict';this._updateView();if(!c('ChatVisibility').isOnline())this.hide();};q.prototype._updateView=function(r){'use strict';var s=this.container;if(s){c('CSS').conditionClass(s,'offline',!c('ChatVisibility').isOnline());c('CSS').conditionClass(s,'error',c('ChannelConnection').disconnected());}if(c('ChannelConnection').disconnected())c('DOM').setContent(this.message,this.warningMsgText);var t,u;if(!c('ChatVisibility').isOnline()){t=j._("{Chat} (desactivado)",[j.param('Chat',j._("Chat"))]);}else if(c('ChannelConnection').disconnected()){t=j._("{Chat} (Sin conexi\u00f3n)",[j.param('Chat',j._("Chat"))]);}else{var v=c('PresenceStatus').getOnlineCount();if(v){var w=c('DOM').create('span',{className:'count'},'('+v+')');t=j._({"*":"{Chat} {number-available}"},[j.param('Chat',j._("Chat")),j.param('number-available',w,[0,v])]);}else{t=j._("Chat");u=true;}}this._setUnread();this._setLabel(t,u);this.buttonContentChanged();};q.prototype.onButtonClick=function(){'use strict';if(!c('ChatSidebarStore').isInitialized())return true;var r=c('ChatSidebarStore').isEnabled(),s=c('ChatSidebarVisibility').shouldShowSidebarIgnoreEnabled();if(!r&&s){c('ChatSidebarActions').enable();}else c('ChatSidebarActions').show();return !s;};q.prototype.onHide=function(){'use strict';this._isOpen=false;if(this._buddyListRenderSubscription){this.orderedList.unsubscribe(this._buddyListRenderSubscription);this._buddyListRenderSubscription=null;}this._hideBuddyList();c('Arbiter').inform('buddylist/hide');};q.prototype._onKeyDown=function(event){'use strict';var r=c('Event').getKeyCode(event);if(r===c('Keys').ESC&&!c('CSS').hasClass(this.root,'menuOpened')){this.hide();return false;}else if(r==c('Keys').RETURN)c('ChatSidebarActions').enable();};q.prototype._onSidebarHide=function(event){'use strict';if(c('ChatSidebarStore').isEnabled()&&!c('ChatOptions').getSetting('hide_buddylist')&&!c('ChannelConnection').disconnected()&&!c('PresencePrivacy').isUserOffline()){this.show();}else{this.hide();this.button.focus();}};q.prototype.onResize=function(){'use strict';var r=!this._typeaheadActive?n:c('Dock').getMaxFlyoutHeight(this.root)-60;c('Arbiter').inform('buddyList/resized',r,c('Arbiter').BEHAVIOR_PERSISTENT);if(this._typeaheadActive){c('Style').set(this.body,'max-height','none');}else c('Style').set(this.body,'max-height',o);var s=Math.max(250,r),t=Math.floor(s/m);this.orderedList.setNumTopFriends(t);};q.prototype._showBuddyList=function(){'use strict';this._buddyListRenderSubscription=this.orderedList.subscribe('render',function(){if(c('Style').get(this.body,'height')!=o)c('Style').set(this.body,'height',o);}.bind(this));this.orderedList.show();p.bump('buddylist_show');};q.prototype._hideBuddyList=function(){'use strict';this.orderedList.hide();p.bump('buddylist_hide');};q.prototype.onShow=function(){'use strict';this._isOpen=true;if(c('ChannelConnection').disconnected()){this._tryReconnect();this._showBuddyList();}else c('ChatVisibility').goOnline(this._showBuddyList.bind(this));this._syncHideBuddylist(false);};q.prototype._setLabel=function(r,s){'use strict';var t=this.label.textContent||this.label.innerText;if(t!==r){var u=this.label.cloneNode(true);c('DOM').setContent(u,r);c('DOM').replace(this.label,u);this.label=u;}this.throbber&&c('CSS').conditionShow(this.throbber,!!s);};q.prototype._setUnread=function(r){'use strict';c('CSS').conditionShow(this.unreadCount,!!r);};q.prototype._updateCount=function(){'use strict';this._updateView();};q.prototype._syncHideBuddylist=function(r){'use strict';c('ChatOptions').setSetting('hide_buddylist',r,'buddylist');new (c('AsyncRequest'))('/ajax/chat/settings.php').setHandler(c('emptyFunction')).setErrorHandler(c('emptyFunction')).setData({hide_buddylist:r,window_id:c('PresenceUtil').getSessionID()}).setAllowCrossPageTransition(true).send();};f.exports=q;},null);
__d('ChatHovercard',['Arbiter','AsyncLoader','Bootloader','JSLogger','debounce'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=5,i=new (c('AsyncLoader'))('/ajax/chat/hovercard/sidebar.php','hover'),j=c('JSLogger').create('chat_hovercard');c('Arbiter').subscribe('Hovercard/dirty',i.reset.bind(i));function k(o,p){i.get(o,function(q){setTimeout(function(){if(!q){j.error('fetch_failure',{id:o});return;}c('Bootloader').loadModules(["Hovercard"],function(r){var s=r.getDialog(q);if(!s){j.error('no_hovercard',{id:o,endpoint:q});return;}if(o==p.getActiveID())p.showHovercard(o,s);});},0);});}function l(o,p){var q=[];function r(u){if(u>=0&&u<o.length)q.push(o[u]);}var s=o.indexOf(p);if(s>-1){r(s);for(var t=1;t<h;t++){r(s+t);r(s-t);}}return q.filter(function(u){return u;});}function m(o,p){var q=p.getActiveID();if(q){var r=o.getShowingUsers(),s=l(r,q);i.get(s,function(){});}}function n(o){var p=o.getHoverController();p.registerDefault(k);p.subscribe('hover',c('debounce')(m.bind(null,o,p),100));}f.exports=n;},null);
__d('ChatOrderedListHover',['csx','cx','ArbiterMixin','CSS','ErrorUtils','Event','LayerHideOnBlur','Parent','mixin','setTimeoutAcrossTransitions','shield'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();function l(o){c('CSS').addClass(o,'fetching');}function m(o){c('CSS').removeClass(o,'fetching');}j=babelHelpers.inherits(n,c('mixin')(c('ArbiterMixin')));k=j&&j.prototype;function n(o){'use strict';k.constructor.call(this);this._orderedList=o;this._root=o.getRoot();c('Event').listen(this._root,'mouseover',this._mouseOver.bind(this));c('Event').listen(this._root,'mouseleave',this._mouseLeave.bind(this));o.subscribe('click',c('shield')(this._hide,this));}n.prototype._mouseOver=function(event){'use strict';if(this._paused)return;var o=event.getTarget(),p=c('Parent').bySelector(o,"._42fz")||c('Parent').bySelector(o,"._5a58");p&&this._setActiveItem(p);};n.prototype._mouseLeave=function(event){'use strict';this._setActiveItem(null);};n.prototype._clearTimeouts=function(){'use strict';this._showTimeout&&clearTimeout(this._showTimeout);this._showTimeout=null;this._hideTimeout&&clearTimeout(this._hideTimeout);this._hideTimeout=null;};n.prototype._hide=function(){'use strict';if(this._showingDialog){this._showingDialog.hide();this._showingDialog=null;this._showingID=null;}};n.prototype._show=function(){'use strict';var o=this.getActiveID(),p=false;if(this._defaultHandler){p=true;c('ErrorUtils').applyWithGuard(this._defaultHandler,{},[o,this]);}if(p&&this._showingID!=this.getActiveID())l(this._activeItem);};n.prototype._setActiveItem=function(o){'use strict';if(o!=this._activeItem){this._clearTimeouts();this._activeItem&&m(this._activeItem);if(o){this._activeItem=o;var p=this._showingDialog?0:600;this._showTimeout=c('setTimeoutAcrossTransitions')(function(){return this._show();}.bind(this),p);this.inform('hover');}else{this._activeItem=null;this._hideTimeout=c('setTimeoutAcrossTransitions')(function(){return this._hide();}.bind(this),10);this.inform('leave');}}};n.prototype.registerDefault=function(o){'use strict';this._defaultHandler=o;};n.prototype.getActiveID=function(){'use strict';var o=this._activeItem&&this._orderedList.getUserForNode(this._activeItem);return o||null;};n.prototype.showHovercard=function(o,p){'use strict';if(o==this.getActiveID()&&o!=this._showingID){this._clearTimeouts();m(this._activeItem);this._hide();this._showingDialog=p;this._showingID=o;var q=p.subscribe('mouseenter',this._setActiveItem.bind(this,this._activeItem)),r=p.subscribe('mouseleave',function(){q.unsubscribe();this._setActiveItem(null);}.bind(this)),s=p.subscribe('hide',function(){this.inform('hovercard_hide');q.unsubscribe();r.unsubscribe();s.unsubscribe();}.bind(this));p.enableBehavior(c('LayerHideOnBlur')).setContext(this._activeItem).setPosition('left').show();this.inform('hovercard_show');}};Object.assign(n.prototype,{_root:null,_activeItem:null,_hideTimeout:null,_showTimeout:null,_showingDialog:null,_showingID:null,_defaultHandler:null});f.exports=n;},null);
__d("ChatSidebarConstants",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={LITESTAND_CLASSIC_SIZE:32,IMAGE_SIZE:32};Object.assign(h,{getImageSize:function(i){if(i===false)return h.IMAGE_SIZE;return h.LITESTAND_CLASSIC_SIZE;},getItemHeight:function(){return h.IMAGE_SIZE+8;}});f.exports=h;},null);
__d('ChatSidebarItem.react',['cx','ix','xuiglyph','AvailableListConstants','XUIBadge.react','ChatConfig','ChatSidebarConstants','Image.react','Link.react','MercuryConfig','ReactComponentWithPureRenderMixin','React','SplitImage.react','TextWithEmoticons.react','Timestamp.react'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('ChatConfig').get('divebar_rounded_profile',false),m=9,n=c('React').createClass({displayName:'ChatSidebarItem',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{image:k.string,images:k.array,isPlayingGame:k.bool,birthday:k.bool,context:k.string,href:k.string,imageSize:k.number,name:k.string,nameCanHaveEmoji:k.bool,onClick:k.func,status:k.number,statusTime:k.string,unreadCount:k.number,isMessengerOnlyContact:k.bool},render:function(){var o="_55ln"+(this.props.context?' '+"_55lo":'')+(this.props.unreadCount?' '+"_5bom":'')+(l?' '+"_qhr":''),p="_55lr";return (c('React').createElement(c('Link.react'),{className:o,href:{url:this.props.href},onClick:this.props.onClick,rel:'ignore'},c('React').createElement('div',{className:"_55lp"},c('React').createElement('div',{className:"_56p9"},c('React').createElement(c('SplitImage.react'),{size:this.props.imageSize||c('ChatSidebarConstants').IMAGE_SIZE,srcs:this.props.image||this.props.images}),c('React').createElement('div',{className:"_568w"})),c('React').createElement('div',{className:"_5bon"},this.renderPlayingGame(),this.renderBirthday(),this.renderUnreadCount(),this.renderStatus()),c('React').createElement('div',{className:p},this.renderName()),c('React').createElement('div',{className:"_55ls"},this.props.context))));},renderName:function(){if(this.props.nameCanHaveEmoji){var o=c('React').createElement(c('TextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:this.props.name});if(c('MercuryConfig').MessengerNewEmojiGK&&c('MercuryConfig').MessengerTextWithEmoticonsModule){var p=c('MercuryConfig').MessengerTextWithEmoticonsModule;o=c('React').createElement(p,{renderEmoticons:true,renderEmoji:true,text:this.props.name});}return o;}else return this.props.name;},renderUnreadCount:function(){var o=this.props.unreadCount;if(!o)return null;return (c('React').createElement(c('XUIBadge.react'),{count:o,maxcount:m,type:'regular'}));},renderStatus:function(){var o=this.getStatusSrc();if(!o&&!this.props.statusTime)return null;var p=o?c('React').createElement(c('Image.react'),{className:"_568_",src:o}):null,q=true,r=this.props.unreadCount||0;if(r>0){p=this.props.statusTime?null:p;q=false;}return (c('React').createElement('div',{className:"_568z"},q?this.renderLastActiveTime():null,p));},renderLastActiveTime:function(){return (c('React').createElement('div',{className:"_568-"},this.props.statusTime));},renderBirthday:function(){if(!this.props.birthday)return null;var o=i('/images/gifts/icons/cake_icon.png');return (c('React').createElement(c('Image.react'),{className:"_5dv3",src:o}));},renderPlayingGame:function(){if(this.props.statusTime||this.props.birthday||!this.props.isPlayingGame)return null;return (c('React').createElement('div',{className:"_46b2"},c('React').createElement(c('Image.react'),{className:"_46b3",src:j({name:'games',size:'small'})})));},getStatusSrc:function(){if(this.props.isMessengerOnlyContact)return i('/images/chat/sidebar/buddylist_nub/phone.png');switch(this.props.status){case c('AvailableListConstants').ACTIVE:return i('/images/chat/sidebar/buddylist_nub/greenDot.png');case c('AvailableListConstants').MOBILE:return i('/images/chat/sidebar/buddylist_nub/phone.png');}return null;}});f.exports=n;},null);
__d('ChatSidebarThread.react',['fbt','ChatSidebarItem.react','ChatOpenTab','MercuryParticipantListRenderer','WebMessengerPermalinkConstants','React','Tooltip.react'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=10,k=c('React').createClass({displayName:'ChatSidebarThread',propTypes:{image:i.string,imageSize:i.number,name:i.string,participants:i.array,numOtherParticipants:i.number,referrer:i.string,status:i.number,threadFBID:i.string,unreadCount:i.number},_renderParticipants:function(){var n=[],o=this.props.participants.length,p=this.props.numOtherParticipants,q=Math.min(j,o);if(p-q==1)q--;for(var r=0;r<q;r++){var s=this.props.participants[r];n.push(c('React').createElement('li',{key:s.id},s.name));}if(q<p)n.push(c('React').createElement('li',{key:'more-participants'},h._("y {num} m\u00e1s...",[h.param('num',p-q)])));return (c('React').createElement('ul',null,n));},render:function(){var n=this.props.name,o=l(this.props.threadFBID,this.props.participants,this.props.numOtherParticipants),p=n?o:undefined,q=c('WebMessengerPermalinkConstants').getURIPathForThreadID(this.props.threadFBID),r=m(this.props.image,this.props.participants),s=n?n:o;return (c('React').createElement(c('Tooltip.react'),{display:'block',position:'above',tooltip:this._renderParticipants()},c('React').createElement(c('ChatSidebarItem.react'),{context:p,href:q,imageSize:this.props.imageSize,image:this.props.image,images:r,name:s,nameCanHaveEmoji:true,onClick:this._openTab,referrer:this.props.referrer,status:this.props.status,unreadCount:this.props.unreadCount})));},_openTab:function(n){n.preventDefault();c('ChatOpenTab').openThread(this.props.threadFBID,this.props.referrer);}});function l(n,o,p){return new (c('MercuryParticipantListRenderer'))().setIsNewThread(!n).setUseShortName(true).setTotalParticipantCount(p).renderParticipantList(o);}function m(n,o){if(n)return null;return o.map(function(p){return p.image_src;}).filter(function(p){return p;});}f.exports=k;},null);
__d('ChatSidebarGroupThreadsGroup.react',['cx','ChatSidebarThread.react','ChatSidebarSections','ChatSidebarConstants','PresencePrivacy','PresenceStatus','React'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'ChatSidebarGroupThreadsGroup',propTypes:{groups:i.array.isRequired,isDisconnected:i.bool},render:function(){return (c('React').createElement('ul',null,this.props.groups.map(this._renderGroup)));},_renderGroup:function(k){var l=k.mercury_thread.participants,m=this.props.isDisconnected||c('PresencePrivacy').isUserOffline();return (c('React').createElement('li',{className:"_42fz"+(m?' '+"_570-":''),'data-id':k.uid,key:k.uid},c('React').createElement(c('ChatSidebarThread.react'),{image:k.mercury_thread.image_src,imageSize:c('ChatSidebarConstants').getImageSize(),name:k.mercury_thread.name,participants:k.participants_to_render,numOtherParticipants:l.length-1,referrer:c('ChatSidebarSections').ORDERED_LIST,status:c('PresenceStatus').getGroup(l),threadFBID:k.uid})));}});f.exports=j;},null);
__d('ChatSidebarHeader.react',['cx','ReactComponentWithPureRenderMixin','React','joinClasses'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').createClass({displayName:'ReactChatSidebarHeader',mixins:[c('ReactComponentWithPureRenderMixin')],render:function(){return (c('React').createElement('div',babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,"_55ob")}),c('React').createElement('div',{className:"_55oc"},this.props.children)));}});f.exports=i;},null);
__d('ChatSidebarUser.react',['ChatOpenTab','ChatSidebarItem.react','WebMessengerPermalinkConstants','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ChatSidebarUser',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{birthday:h.bool,image:h.string,imageSize:h.number,isPlayingGame:h.bool,name:h.string,sectionName:h.string.isRequired,slot:h.number,status:h.number,statusTime:h.string,unreadCount:h.number,userID:h.string.isRequired,isMessengerOnlyContact:h.bool},_openTab:function(event){c('ChatOpenTab').openUserTab(this.props.userID,this.props.sectionName,{global_slot:this.props.slot});return event.preventDefault();},render:function(){var j=c('WebMessengerPermalinkConstants').getURIPathForIDOrVanity(this.props.userID);return (c('React').createElement(c('ChatSidebarItem.react'),{onClick:this._openTab,href:j,imageSize:this.props.imageSize,image:this.props.image,isPlayingGame:this.props.isPlayingGame,name:this.props.name,nameCanHaveEmoji:false,status:this.props.status,birthday:this.props.birthday,statusTime:this.props.statusTime,context:this.props.context,unreadCount:this.props.unreadCount,isMessengerOnlyContact:this.props.isMessengerOnlyContact}));}});f.exports=i;},null);
__d('ChatSidebarUserGroup.react',['cx','Promise','AvailableList','AvailableListConstants','CanvasGKs','ChatSidebarSections','ChatSidebarUser.react','LastActiveTimes','PresencePrivacy','PresenceStatus','React','ShortProfiles','SubscriptionsHandler','createCancelableFunction','requireWeak','shield'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=new (c('Promise'))(function(n){c('requireWeak')('ChatUnreadCount',function(o){k=o.get();n(k);});}),k=undefined,l=Object.keys(c('ChatSidebarSections')).map(function(n){return c('ChatSidebarSections')[n];}),m=c('React').createClass({displayName:'ChatSidebarUserGroup',propTypes:{ids:i.array.isRequired,isDisconnected:i.bool,loadExtras:i.bool,sectionName:i.oneOf(l).isRequired},getInitialState:function(){return {userData:[]};},componentWillMount:function(){this._subscriptions=new (c('SubscriptionsHandler'))();this._updateProfiles=c('createCancelableFunction')(function(n,o){var p=n.map(function(q){return o[q];});this.setState({userData:p});}.bind(this));this._subscriptions.addSubscriptions(this._updateProfiles);this.componentWillReceiveProps(this.props);},componentDidMount:function(){this._subscriptions.addSubscriptions(c('AvailableList').subscribe(c('AvailableListConstants').ON_AVAILABILITY_CHANGED,this._onAvailabilityChanged));j.done(function(n){this._subscriptions.addSubscriptions(n.subscribe('unread-count-changed',c('shield')(this.forceUpdate,this)));}.bind(this));},shouldComponentUpdate:function(n,o){var p=this.props,q=p.ids,r=babelHelpers.objectWithoutProperties(p,['ids']);for(var s in r)if(r.hasOwnProperty(s))if(r[s]!==n[s])return true;var t=o.userData,u=this.state.userData;if(t.length!==u.length)return true;for(var v=0;v<u.length;v++)if(u[v].id!==t[v].id)return true;return false;},componentWillUnmount:function(){this._subscriptions.release();},componentWillReceiveProps:function(n){c('ShortProfiles').getMulti(n.ids,this._updateProfiles.bind(this,n.ids));this.setState({userData:n.ids.map(function(o){return c('ShortProfiles').getNow(o);}).filter(function(o){return o;})});},render:function(){return (c('React').createElement('ul',this.props,this.state.userData.map(this._renderProfile)));},_renderProfile:function(n,o){if(n.id===0)return null;var p=c('PresenceStatus').get(n.id);if(p!==c('AvailableListConstants').ACTIVE)p=null;var q=null;if(c('CanvasGKs').pg_chatproxy_canvas_buddy_icon)q=c('PresenceStatus').isPlayingCanvasGameUser(n.id);var r=p!==c('AvailableListConstants').ACTIVE?c('LastActiveTimes').getShortDisplay(n.id):null,s=this.props.isDisconnected||!c('PresencePrivacy').allows(n.id);return (c('React').createElement('li',{className:"_42fz"+(s?' '+"_570-":''),'data-id':n.id,key:n.id},c('React').createElement(c('ChatSidebarUser.react'),{birthday:n.is_birthday,image:n.thumbSrc,imageSize:this.props.imageSize,isPlayingGame:q,name:n.name,sectionName:this.props.sectionName,slot:o,status:p,statusTime:r,userID:n.id,unreadCount:this._getUnreadCountForUID(n.id),isMessengerOnlyContact:n.is_messenger_only})));},_getUnreadCountForUID:function(n){if(!k)return null;return k.getUnreadCountForUID(n);},_onAvailabilityChanged:function(n,o){if(!o||this.props.ids.indexOf(o)!==-1)this.forceUpdate();}});f.exports=m;},null);
__d('ChatSidebarOrderedList.react',['cx','fbt','Animation','ChatConfig','Bootloader','ChatQuietLinks','ChatReliabilityInstrumentation','ChatSidebarConstants','ChatSidebarGroupThreadsGroup.react','ChatSidebarHeader.react','ChatSidebarSections','ChatSidebarUserGroup.react','PresencePrivacy','ReactComponentWithPureRenderMixin','React','ReactDOM','Run','Scroll','SubscriptionsHandler'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'ChatSidebarOrderedList',propTypes:{topUsers:j.array.isRequired,availableUsers:j.array.isRequired,isSidebar:j.bool.isRequired,scrollContainer:j.object,groups:j.array.isRequired},getInitialState:function(){return {renderBelowFold:false,isDisconnected:false};},componentDidMount:function(){c('ChatQuietLinks').nukeLinks(c('ReactDOM').findDOMNode(this));this._subscriptions=new (c('SubscriptionsHandler'))();c('Run').onAfterLoad(function(){this.setState({renderBelowFold:true});this._bootloadChannelSubscription();}.bind(this));},componentWillUnmount:function(){this._subscriptions.release();},_scrollToSeparator:function(l){if(!this.props.scrollContainer)return;var m=this.props.scrollContainer.scrollHeight,n=this.props.scrollContainer.clientHeight,o=c('Scroll').getTop(this.props.scrollContainer),p=Math.min(l.offsetTop,m-n);if(o!==p){var q=Math.abs(p-o)/this.props.scrollContainer.clientHeight*500;new (c('Animation'))(this.props.scrollContainer).to('scrollTop',p).ease(c('Animation').ease.end).duration(q).go();}},_renderOfflineSection:function(){var l=c('ChatSidebarConstants').getImageSize(this.props.isSidebar),m=this.props.topUsers.filter(function(o){return !c('PresencePrivacy').allows(o);});m.splice(-2);var n=c('React').createElement('a',{ajaxify:'/ajax/chat/privacy/settings_dialog.php?ref=whitelist_separator',href:'#',rel:'dialog'},i._("Editar"));return [c('React').createElement(c('ChatSidebarHeader.react'),{key:'usersSeparator1'},i._("M\u00c1S AMIGOS")),c('React').createElement(c('ChatSidebarHeader.react'),{className:"_5j9-",key:'usersSeparator2'},i._("Estos amigos no pueden verte en el chat. {=link}",[i.param('=link',n)])),c('React').createElement(c('ChatSidebarUserGroup.react'),{ids:m,isDisconnected:this.state.isDisconnected,imageSize:l,key:c('ChatSidebarSections').OFFLINE_USERS,loadExtras:this.state.renderBelowFold,sectionName:c('ChatSidebarSections').OFFLINE_USERS})];},_renderOnlineSection:function(){if(this.props.availableUsers.length===0)return null;if(!this.state.renderBelowFold){var l=c('ChatSidebarConstants').getItemHeight();return (c('React').createElement('div',{key:c('ChatSidebarSections').MORE_ONLINE_FRIENDS,style:{height:l*this.props.availableUsers.length}}));}var m=c('ChatSidebarConstants').getImageSize(this.props.isSidebar),n=i._("{MORE ONLINE FRIENDS} ({=count})",[i.param('MORE ONLINE FRIENDS',i._("M\u00c1S AMIGOS")),i.param('=count',this.props.availableUsers.length)]),o=c('React').createElement(c('ChatSidebarUserGroup.react'),{ids:this.props.availableUsers,imageSize:m,isDisconnected:this.state.isDisconnected,key:c('ChatSidebarSections').MORE_ONLINE_FRIENDS,loadExtras:this.state.renderBelowFold,sectionName:c('ChatSidebarSections').MORE_ONLINE_FRIENDS});return [c('React').createElement(c('ChatSidebarHeader.react'),{ref:'usersSeparator',key:'usersSeparator',onClick:function(){return this._scrollToSeparator(c('ReactDOM').findDOMNode(this.refs.usersSeparator));}.bind(this)},n),o];},_renderGroupsSection:function(){if(this.props.groups.length===0)return null;var l=this.state.isDisconnected||c('PresencePrivacy').isUserOffline();return [c('React').createElement(c('ChatSidebarHeader.react'),{ref:'groupSeparator',key:'groupSeparator',className:l?"_570-":'',onClick:function(){return this._scrollToSeparator(c('ReactDOM').findDOMNode(this.refs.groupSeparator));}.bind(this)},i._("CONVERSACIONES DE GRUPO")),c('React').createElement(c('ChatSidebarGroupThreadsGroup.react'),{groups:this.props.groups,isDisconnected:this.state.isDisconnected,key:'group_threads_section',loadExtras:this.state.renderBelowFold})];},_renderFriendsSection:function(){var l=c('ChatSidebarConstants').getImageSize(this.props.isSidebar),m=this.props.topUsers;if(c('PresencePrivacy').getVisibility()==c('PresencePrivacy').ONLINE)m=this.props.topUsers.filter(function(n){return c('PresencePrivacy').allows(n);});return [c('React').createElement(c('ChatSidebarUserGroup.react'),{key:c('ChatSidebarSections').ORDERED_LIST,ids:m,isDisconnected:this.state.isDisconnected,imageSize:l,loadExtras:this.state.renderBelowFold,sectionName:c('ChatSidebarSections').ORDERED_LIST})];},render:function(){var l=c('PresencePrivacy').getOnlinePolicy()==c('PresencePrivacy').ONLINE_TO_WHITELIST&&c('PresencePrivacy').getVisibility()?this._renderOfflineSection():this._renderOnlineSection(),m=this._renderFriendsSection(),n=this._renderGroupsSection();return (c('React').createElement('div',null,m,n,l));},_bootloadChannelSubscription:function(){c('Bootloader').loadModules(["ChannelConnection"],function(l){this._subscriptions.addSubscriptions(l.subscribe([l.CONNECTED,l.RECONNECTING,l.SHUTDOWN,l.MUTE_WARNING,l.UNMUTE_WARNING],function(){var m=l.disconnected();if(m!==this.state.isDisconnected){if(m){c('ChatReliabilityInstrumentation').logCHANNEL_DISCONNECT();}else c('ChatReliabilityInstrumentation').logCHANNEL_CONNECT();this.setState({isDisconnected:m});}}.bind(this)));}.bind(this));}});f.exports=k;},null);
__d('ChatSortUsers',['ShortProfiles','TokenizeUtil'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={};function i(k){if(h[k])return h[k];var l=(c('ShortProfiles').getNowUnsafe(k)||{}).name;if(l)return h[k]=c('TokenizeUtil').flatten(l);return '~';}var j={sortAlphabetical:function(k,l){var m=i(k),n=i(l);if(m!==n)return m<n?-1:1;return 0;}};f.exports=j;},null);
__d('PresenceOrderedList',['ChatSortUsers','immutable','InitialChatFriendsList','PresencePrivacy','PresenceStatus'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){'use strict';this.$PresenceOrderedList1=this.$PresenceOrderedList2();}h.prototype.getSorted=function(i){'use strict';var j=[];this.$PresenceOrderedList1.forEach(function(k){var l=k[0],m=k[1];if(j.length>=i)return false;if(c('PresencePrivacy').getFriendVisibility(l)==c('PresencePrivacy').BLACKLISTED)return true;if(m==c('PresenceStatus').get(l))j.push(l);});return c('immutable').OrderedSet(j);};h.prototype.getAvailableSorted=function(i){'use strict';var j=c('immutable').Set(c('PresenceStatus').getOnlineIDs());if(i)j=j.subtract(i);return j.sort(c('ChatSortUsers').sortAlphabetical);};h.prototype.$PresenceOrderedList2=function(){'use strict';var i=c('InitialChatFriendsList').list||[];return i.map(function(j){var k=j.slice(0,-2),l=Number(j.slice(-1));return [k,l];});};f.exports=new h();},null);
__d('ChatOrderedList',['csx','Arbiter','ArbiterMixin','AvailableList','AvailableListConstants','CSS','ChatConfig','ChatHovercard','ChatOptions','ChatOrderedListHover','ChatSidebarConstants','ChatSidebarInboxConfig','ChatSidebarOrderedList.react','ChatVisibility','DOM','DataStore','Event','InitialChatFriendsList','JSLogger','Parent','PresenceOrderedList','PresencePrivacy','PresenceStatus','React','ReactDOM','createObjectFrom','debounceAcrossTransitions','mixin','shield'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=null;i=babelHelpers.inherits(l,c('mixin')(c('ArbiterMixin')));j=i&&i.prototype;function l(m,n){'use strict';j.constructor.call(this);this._isSidebar=m;this._root=n;this._isVisible=false;this._excludedIds={};this._numTopFriends=5;this._groups=[];this._hoverController=null;this._isHovering=false;this._orderedList=c('DOM').find(this._root,'.fbChatOrderedList');c('Event').listen(this._orderedList,'mouseover',function(){this._isHovering=true;}.bind(this));c('Event').listen(this._orderedList,'mouseout',function(){this._isHovering=false;this._render();}.bind(this));this._scrollableOrderedList=c('Parent').byClass(this._root,'scrollableOrderedList');this._scrollableArea=c('Parent').byClass(this._root,'scrollable');if(this._isSidebar)new (c('ChatHovercard'))(this);c('Arbiter').subscribe(c('JSLogger').DUMP_EVENT,function(o,p){p.chat_lists=p.chat_lists||{sorted_list:this.getSortedList(),available_list:c('PresenceOrderedList').getAvailableSorted(),excluded_list:this._excludedIds};}.bind(this));c('PresencePrivacy').subscribe('privacy-user-presence-changed',c('shield')(this._render,this));c('AvailableList').subscribe(c('AvailableListConstants').ON_AVAILABILITY_CHANGED,c('shield')(this._render,this));}l.prototype.getShowingUsers=function(){'use strict';return c('DOM').scry(this._root,"li._42fz,li._5a58").map(this.getUserForNode);};l.prototype.getUserForNode=function(m){'use strict';return c('DataStore').get(m,'id')||c('DataStore').get(m,'serverthreadid');};l.prototype.getHoverController=function(){'use strict';if(!this._hoverController)this._hoverController=new (c('ChatOrderedListHover'))(this);return this._hoverController;};l.prototype.getItemHeight=function(){'use strict';return c('ChatSidebarConstants').getItemHeight();};l.prototype.getRoot=function(){'use strict';return this._root;};l.prototype.getSortedList=function(){'use strict';return c('PresenceOrderedList').getSorted(this._numTopFriends);};l.prototype.hide=function(){'use strict';if(!this._isVisible)return;this._isVisible=false;c('CSS').hide(this._scrollableOrderedList||this._root);this.inform('hide');};l.prototype.setNumTopFriends=function(m,n){'use strict';if(c('ChatConfig').get('web_messenger_divebar_show_more_groups')){this.setNumTopFriendsMoreGroups(m,n);return;}var o=this._getGroups(),p=m-o.length;if(p>c('ChatConfig').get('min_top_friends'))m=p;m--;if(m!==this._numTopFriends||o.length!==this._groups.length){this._groups=o;this._numTopFriends=m;if(n){this._renderOrderedList();}else this._render();}};l.prototype.setNumTopFriendsMoreGroups=function(m,n){'use strict';var o=this._getGroups(),p=Math.max(Math.min(Math.floor(m/5),o.length),2),q=o.length>p?p:o.length,r=Math.max(m-q,1);if(r>1)r--;o=o.slice(0,q);if(r!==this._numTopFriends||o.length!==this._groups.length){this._numTopFriends=r;this._groups=o;if(n){this._renderOrderedList();}else this._render();}};l.prototype._renderOrderedList=function(){'use strict';if(!this._isVisible||this._isHovering)return;var m=this.getSortedList(),n=c('PresenceOrderedList').getAvailableSorted(m),o=c('ChatSidebarInboxConfig').component;if(o){c('ReactDOM').render(c('React').createElement(o,{showCount:c('ChatSidebarInboxConfig').show_count,showPresence:c('ChatSidebarInboxConfig').show_presence,threadCount:this._numTopFriends}),this._orderedList);}else c('ReactDOM').render(c('React').createElement(c('ChatSidebarOrderedList.react'),{availableUsers:n.toArray(),isSidebar:this._isSidebar,scrollContainer:this._scrollContainer,topUsers:m.toArray(),groups:this._groups}),this._orderedList);this.inform('render');};l.prototype._render=function(){'use strict';this._render=c('debounceAcrossTransitions')(this._renderOrderedList.bind(this),300);this._render();};l.prototype.show=function(){'use strict';if(this._isVisible)return;this._isVisible=true;c('CSS').show(this._scrollableOrderedList||this._root);this._render();this.inform('show');};l.prototype.isVisible=function(){'use strict';return this._isVisible;};l.prototype.setScrollContainer=function(m){'use strict';if(c('DOM').contains(m,this._root))this._scrollContainer=m;};l.prototype._getGroups=function(){'use strict';if(!c('ChatOptions').getSetting('hide_groups')){return c('InitialChatFriendsList').groups||[];}else return [];};f.exports=l;},null);
__d('ChatSearchSource',['requireWeak','AbstractSearchSource','AsyncRequest','CurrentUser','MercuryConfig','MercuryParticipantTypes','SearchableEntry','SearchSourceCallbackManager','ShortProfiles','TokenizeUtil','emptyFunction','isValidUniqueID'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=null;c('requireWeak')('OrderedFriendsList',function(l){j=l;});h=babelHelpers.inherits(k,c('AbstractSearchSource'));i=h&&h.prototype;function k(l){i.constructor.call(this);this.$ChatSearchSource1=new (c('SearchSourceCallbackManager'))({parseFn:c('TokenizeUtil').parse,matchFn:c('TokenizeUtil').isQueryMatch,indexFn:l.indexFn});this.$ChatSearchSource2=l.queryRequests||[];this.$ChatSearchSource3=false;}k.prototype.bootstrapImpl=function(l){c('ShortProfiles').fetchAll().done(function(){this.$ChatSearchSource3=true;this.$ChatSearchSource4();l();}.bind(this));};k.prototype.searchImpl=function(l,m,n){var o=null,p={},q=n&&n.onQueryFinished,r=n&&n.onQueryStarted;r&&r(l);var s=this.$ChatSearchSource1.search(l,function(v){if(!o){o=v;o.forEach(function(w){return p[w.getUniqueID()]=true;});}else v.forEach(function(w){var x=w.getUniqueID();if(!p[x]){o.push(w);p[x]=true;}});m(o,l);if(l.length===1&&this.$ChatSearchSource3)q&&q(l);}.bind(this),n);if(!s||!this.$ChatSearchSource2||!this.$ChatSearchSource2.length||l.length===0){q&&q(l);return;}if(l.length===1){if(this.$ChatSearchSource3)q&&q(l);return;}var t={value:l,existing_ids:o&&o.map(function(v){return v.getUniqueID();}).join(','),limit:n&&n.threadLimit},u=this.$ChatSearchSource2.length;this.$ChatSearchSource2.forEach(function(v){this.$ChatSearchSource5(t,v,function(w){this.$ChatSearchSource6(this.$ChatSearchSource7(this.$ChatSearchSource8(w)).filter(function(x){return !!x;}),l);u--;if(u===0){this.$ChatSearchSource1.setQueryStringAsExhausted(l);q&&q(l);}}.bind(this));}.bind(this),this);};k.prototype.getAllEntriesMap=function(){return this.$ChatSearchSource1.getAllEntries();};k.prototype.$ChatSearchSource4=function(){var l=c('ShortProfiles').getCachedProfileIDs(),m=l.filter(function(o){var p=c('ShortProfiles').getNow(o);return (o==c('CurrentUser').getID()||p.type===c('MercuryParticipantTypes').FRIEND||p.type===c('MercuryParticipantTypes').PAGE&&c('MercuryConfig').LinkedAgents&&c('MercuryConfig').LinkedAgents.indexOf(o.toString())>-1);}),n=m.map(this.$ChatSearchSource9);if(n.length)this.$ChatSearchSource1.addLocalEntries(n);};k.prototype.$ChatSearchSource7=function(l){return l.map(this.$ChatSearchSource10,this);};k.prototype.$ChatSearchSource10=function(l,m){if(l.mercury_thread){if(!j)return null;return j.normalizeThreadEntry(l,m);}var n=l.text,o=l.uid;if(!n||!c('isValidUniqueID')(o))return null;return new (c('SearchableEntry'))({uniqueID:o,title:n,order:j?j.getActiveRank(o):0,subtitle:l.subtext,type:l.render_type||l.type,photo:l.photo,uri:l.path,auxiliaryData:{isMessengerUser:l.is_messenger_user,alias:l.alias}});};k.prototype.$ChatSearchSource8=function(l){var m=l.getPayload();if(Array.isArray(m)){return m;}else if(m&&m.entries){return m.entries;}else return [];};k.prototype.$ChatSearchSource9=function(l){var m=c('ShortProfiles').getNow(l),n=l==c('CurrentUser').getID()?c('MercuryParticipantTypes').FRIEND:m.type,o=[m.additionalName,m.alternateName].concat(m.searchTokens||[]).join(' '),p=m.name,q=m.additionalName;if(m.threadNickname){p=m.threadNickname;q=m.name;}return new (c('SearchableEntry'))({uniqueID:l,title:p,order:j?j.getActiveRank(l):0,subtitle:q,keywordString:o,type:n,photo:m.thumbSrc,uri:m.uri,auxiliaryData:{isMessengerUser:m.is_messenger_user,alias:m.alias}});};k.prototype.$ChatSearchSource5=function(l,m,n,o){new (c('AsyncRequest'))(m.uri).setData(babelHelpers['extends']({},l,m.data)).setMethod('GET').setReadOnly(true).setHandler(n).setErrorHandler(o||c('emptyFunction')).setAllowCrossPageTransition(true).send();};k.prototype.$ChatSearchSource6=function(l,m){if(l.length)this.$ChatSearchSource1.addQueryEntries(l,m);};k.prototype.addLocalEntries=function(l){this.$ChatSearchSource1.addLocalEntries(l);};k.prototype.refreshData=function(){c('ShortProfiles').fetchAll();};f.exports=k;},null);
__d('ChatSidebarComposeLink.react',['fbt','ChatOpenTab','Link.react','React','TooltipData'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l);}k.prototype.render=function(){var l=h._("Nuevo mensaje");return (c('React').createElement(c('Link.react'),babelHelpers['extends']({className:this.props.className,href:'#',onClick:this.$ChatSidebarComposeLink1},c('TooltipData').propsFor(l))));};k.prototype.$ChatSidebarComposeLink1=function(l){c('ChatOpenTab').openEmptyTab(null,'sidebar');l.preventDefault();};f.exports=k;},null);
__d('ChatSidebarSheetChatOffline.react',['fbt','Link.react','React','ReactComponentWithPureRenderMixin'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'ChatSidebarSheetChatOffline',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{onGoOnlineClick:i.func.isRequired},render:function(){return (c('React').createElement('div',null,h._("{=Go online} para ver qui\u00e9n est\u00e1 disponible.",[h.param('=Go online',c('React').createElement(c('Link.react'),{className:'fbChatGoOnlineLink',onClick:this.props.onGoOnlineClick},h._("Activar el chat")))])));}});f.exports=j;},null);
__d('ChatSidebarSheetChatReconnectMsg.react',['fbt','ChannelConstants','Link.react','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'ChatSidebarSheetChatReconnectMsg',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{msecs:i.number,onManuallyConnectClick:i.func},render:function(){var k=this.props.msecs;if(k==null||false===navigator.onLine){return (c('React').createElement('div',null,h._("No es posible conectar con el chat. Comprueba tu conexi\u00f3n a internet.")));}else if(k>c('ChannelConstants').WARNING_COUNTDOWN_THRESHOLD_MSEC){return (c('React').createElement('div',null,h._("No se puede conectar con el chat. {try-again-link}",[h.param('try-again-link',c('React').createElement(c('Link.react'),{className:'fbChatReconnectLink',onClick:this.props.onManuallyConnectClick},h._("Vuelve a intentarlo")))])));}else if(k>1000){return (c('React').createElement('div',null,h._("No es posible conectar con el chat. Nuevo intento de conexi\u00f3n en {seconds} segundos...",[h.param('seconds',Math.floor(k/1000))])));}else return (c('React').createElement('div',null,h._("No es posible conectar con el chat. Volviendo a conectar...")));}});f.exports=j;},null);
__d('ChatSidebarSheetChatShutdownMsg.react',['fbt','ChannelConstants','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'ChatSidebarSheetChatShutdownMsg',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{hint:i.string},render:function(){var k=this.props.hint;switch(k){case c('ChannelConstants').HINT_AUTH:return (c('React').createElement('div',null,h._("Se ha superado el tiempo de espera de la sesi\u00f3n. Por favor, vuelve a iniciar sesi\u00f3n.")));case c('ChannelConstants').HINT_MAINT:return (c('React').createElement('div',null,h._("El {Chat} de Facebook no est\u00e1 disponible por mantenimiento.",[h.param('Chat',h._("Chat"))])));case c('ChannelConstants').HINT_CONN:return (c('React').createElement('div',null,h._("El {Chat} de Facebook no est\u00e1 disponible por el momento.",[h.param('Chat',h._("Chat"))])));default:return (c('React').createElement('div',null,h._("El {Chat} de Facebook no est\u00e1 disponible por el momento.",[h.param('Chat',h._("Chat"))])));}}});f.exports=j;},null);
__d('ChatSidebarSheet.react',['fbt','ChannelConnection','ChatBehavior','ChatSidebarSheetChatOffline.react','ChatSidebarSheetChatReconnectMsg.react','ChatSidebarSheetChatShutdownMsg.react','ChatVisibility','CSS','JSLogger','PresencePrivacy','ReactComponentWithPureRenderMixin','React','SubscriptionsHandler','emptyFunction','joinClasses','setTimeoutAcrossTransitions'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('JSLogger').create('sidebar_sheet'),j=c('React').PropTypes,k=c('React').createClass({displayName:'ChatSidebarSheet',mixins:[c('ReactComponentWithPureRenderMixin')],getInitialState:function(){return {channelStatus:null,channelData:null,isConnected:!c('ChannelConnection').disconnected(),isOnline:c('ChatVisibility').isOnline(),notifiesUserMessages:c('ChatBehavior').notifiesUserMessages()};},getDefaultProps:function(){return {onUpdate:c('emptyFunction')};},_subscriptions:c('SubscriptionsHandler'),_showWarningTimeout:null,componentDidMount:function(){this._subscriptions=new (c('SubscriptionsHandler'))();this._subscriptions.addSubscriptions(c('ChannelConnection').subscribe([c('ChannelConnection').CONNECTED,c('ChannelConnection').SHUTDOWN,c('ChannelConnection').RECONNECTING],this._handleConnectionChange),c('ChannelConnection').subscribe([c('ChannelConnection').MUTE_WARNING,c('ChannelConnection').UNMUTE_WARNING],this._calculateState),c('PresencePrivacy').subscribe('privacy-user-presence-changed',this._calculateState),c('ChatBehavior').subscribe(c('ChatBehavior').ON_CHANGED,this._calculateState));},componentWillUpdate:function(){if(this._showWarningTimeout){clearTimeout(this._showWarningTimeout);this._showWarningTimeout=null;}},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();},render:function(){var l=undefined,m=undefined;if(!this.state.isOnline){l='offline';m=this._renderOffline();}else if(!this.state.isConnected){l='error';m=this._renderChannelDisconnect();}else if(!this.state.notifiesUserMessages){l='notice';m=this._renderNotice();}return (c('React').createElement('div',{className:c('joinClasses')('fbChatSidebarMessage',l)},c('React').createElement('div',{className:'message'},m)));},_handleConnectionChange:function(l,m){this.setState({channelStatus:l,channelData:m});this._calculateState();},_calculateState:function(){this.setState({isConnected:!c('ChannelConnection').disconnected(),isOnline:c('ChatVisibility').isOnline(),notifiesUserMessages:c('ChatBehavior').notifiesUserMessages()});},_renderChannelDisconnect:function(){if(this.state.channelStatus===c('ChannelConnection').SHUTDOWN){return (c('React').createElement(c('ChatSidebarSheetChatShutdownMsg.react'),{hint:this.state.channelData}));}else if(this.state.channelStatus===c('ChannelConnection').RECONNECTING){var l=this.state.channelData;if(l>1000)this._showWarningTimeout=c('setTimeoutAcrossTransitions')(this._handleConnectionChange.bind(this,c('ChannelConnection').RECONNECTING,l-1000),1000);return (c('React').createElement(c('ChatSidebarSheetChatReconnectMsg.react'),{msecs:l,onManuallyConnectClick:function(){return c('ChannelConnection').reconnect();}}));}return null;},_renderOffline:function(){return (c('React').createElement(c('ChatSidebarSheetChatOffline.react'),{onGoOnlineClick:function(l){i.log('sidebar_go_online');c('ChatVisibility').goOnline();}}));},_renderNotice:function(){return (c('React').createElement('div',null,h._("Las alertas est\u00e1n desactivadas mientras usas otro cliente para chatear.")));}});f.exports=k;},null);
__d('MessengerSearchSource',['ChatSearchSource','MercuryIDs','MercuryParticipants','MercuryParticipantTypes','MercurySingletonProvider','MessengerConfig','OrderedFriendsList','SearchableEntry','emptyFunction'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=50;h=babelHelpers.inherits(k,c('ChatSearchSource'));i=h&&h.prototype;k.getForFBID=function(m){return l.getForFBID(m);};k.get=function(){return l.get();};function k(m){i.constructor.call(this,{queryRequests:[{uri:'/ajax/mercury/composer_query.php'}]});c('OrderedFriendsList').getSearchableEntries(j,function(o){this.$MessengerSearchSource1=o;i.addLocalEntries.call(this,o);}.bind(this));var n=c('MercuryIDs').getParticipantIDFromUserID(m);c('MercuryParticipants').get(n,function(o){i.addLocalEntries.call(this,[new (c('SearchableEntry'))({uniqueID:o.fbid.toString(),title:o.name,type:c('MercuryParticipantTypes').FRIEND,photo:o.big_image_src||o.image_src,uri:o.href,auxiliaryData:{isMessengerUser:o.is_messenger_user}})]);}.bind(this));}k.prototype.bootstrapImpl=function(m){i.bootstrapImpl.call(this,c('emptyFunction'));m();};k.prototype.searchImpl=function(m,n,o){o=o||{};if(m===''&&o.showDefaultEntries){n(this.$MessengerSearchSource1,m);var p=o&&o.onQueryFinished;p&&p(m);return;}o.threadLimit=c('MessengerConfig').MaxThreadResults;i.searchImpl.call(this,m,n,o);};var l=new (c('MercurySingletonProvider'))(k);f.exports=k;},null);
__d('MessengerTypeaheadUtils',['fbt','immutable','MercuryConfig','MercuryTypeaheadConstants','ReactDOM','mapObject'],function a(b,c,d,e,f,g,h){'use strict';var i;if(c.__markCompiled)c.__markCompiled();var j=c('immutable').OrderedMap,k=[c('MercuryTypeaheadConstants').FRIEND_TYPE,c('MercuryTypeaheadConstants').FB4C_TYPE,c('MercuryTypeaheadConstants').THREAD_TYPE,c('MercuryTypeaheadConstants').PAGE_TYPE,c('MercuryTypeaheadConstants').NON_FRIEND_TYPE,c('MercuryTypeaheadConstants').MEETING_ROOM_PAGE_TYPE],l=(i={},i[c('MercuryTypeaheadConstants').FRIEND_TYPE]={header:h._("Amigos")},i[c('MercuryTypeaheadConstants').FB4C_TYPE]={header:h._("Compa\u00f1eros de trabajo")},i[c('MercuryTypeaheadConstants').THREAD_TYPE]={header:h._("Conversaciones de grupo")},i[c('MercuryTypeaheadConstants').PAGE_TYPE]={header:h._("Negocios")},i[c('MercuryTypeaheadConstants').MEETING_ROOM_PAGE_TYPE]={header:h._("Salas de reuniones")},i[c('MercuryTypeaheadConstants').NON_FRIEND_TYPE]={header:h._("M\u00e1s personas")},i),m={sortEntries:function(n,o){var p=[],q=[],r=[],s=[],t=[],u=[];n.forEach(function(v){switch(v.getType()){case c('MercuryTypeaheadConstants').FRIEND_TYPE:p.push(v);break;case c('MercuryTypeaheadConstants').FB4C_TYPE:q.push(v);break;case c('MercuryTypeaheadConstants').THREAD_TYPE:r.push(v);break;case c('MercuryTypeaheadConstants').PAGE_TYPE:case c('MercuryTypeaheadConstants').COMMERCE_PAGE_TYPE:t.push(v);break;case c('MercuryTypeaheadConstants').NON_FRIEND_TYPE:s.push(v);break;case c('MercuryTypeaheadConstants').MEETING_ROOM_PAGE_TYPE:u.push(v);break;}});if(m._shouldHoistPages(o))return t.concat(p,q,r,u,s);return p.concat(q,r,t,u,s);},sortEntriesWithoutPages:function(n){var o=[],p=[],q=[],r=[];n.forEach(function(s){switch(s.getType()){case c('MercuryTypeaheadConstants').FRIEND_TYPE:o.push(s);break;case c('MercuryTypeaheadConstants').FB4C_TYPE:p.push(s);break;case c('MercuryTypeaheadConstants').THREAD_TYPE:q.push(s);break;case c('MercuryTypeaheadConstants').NON_FRIEND_TYPE:r.push(s);break;}});return o.concat(p,q,r);},sortEntriesWithoutGroupsOrViewer:function(n,o){var p=[],q=[],r=[];n.forEach(function(s){if(s.getUniqueID()===o)return;switch(s.getType()){case c('MercuryTypeaheadConstants').FRIEND_TYPE:p.push(s);break;case c('MercuryTypeaheadConstants').FB4C_TYPE:q.push(s);break;case c('MercuryTypeaheadConstants').NON_FRIEND_TYPE:r.push(s);break;}});return p.concat(q,r);},buildListSections:function(n,o){var p=arguments.length<=2||arguments[2]===undefined?k:arguments[2];if(!n.length)return j();var q=c('mapObject')(l,function(r){return babelHelpers['extends']({},r,{entries:[]});});q[c('MercuryTypeaheadConstants').COMMERCE_PAGE_TYPE]=q[c('MercuryTypeaheadConstants').PAGE_TYPE];if(m._shouldHoistPages(o)){p=[].concat(p);p.splice(p.indexOf(c('MercuryTypeaheadConstants').PAGE_TYPE));p.unshift(c('MercuryTypeaheadConstants').PAGE_TYPE);}n.forEach(function(r){var s=r.getType();if(q[s])q[s].entries.push(r);});return j(p.filter(function(r){return q[r].entries.length;}).map(function(r){return [q[r].header,q[r].entries];}));},scrollEntryIntoView:function(n,o){var p=c('ReactDOM').findDOMNode(o),q=o.getScrollTop(),r=n.offsetTop-q,s=p.offsetHeight-n.offsetHeight;if(r>=s){o.scrollToPosition(q+r-s);}else if(r<0)o.scrollToPosition(q+r);},_shouldHoistPages:function(n){if(!n)return false;return !!(c('MercuryConfig').HoistAgentsKeywords&&c('MercuryConfig').HoistAgentsKeywords.indexOf(n.toLowerCase().trim())!==-1);}};f.exports=m;},null);
__d('MessengerContactAdapters',['immutable','ImmutableObject','MercuryTypeaheadConstants'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={fromSearchableEntry:function(i){var j=i.getType(),k={alias:null,isMessengerUser:null,participants:null,photo:i.getPhoto(),subtitle:i.getSubtitle(),thread:null,title:i.getTitle(),type:j,uid:i.getUniqueID()},l=i.getAuxiliaryData();if(l)if(j===c('MercuryTypeaheadConstants').THREAD_TYPE){k.thread=new (c('ImmutableObject'))(l.thread);k.participants=c('immutable').Map().withMutations(function(m){l.participantsToRender.forEach(function(n){m.set(n.id,n);});});}else{k.isMessengerUser=l.isMessengerUser;k.alias=l.alias;}return new (c('ImmutableObject'))(k);},fromMercuryParticipant:function(i){return new (c('ImmutableObject'))({alias:i.alias,uid:i.id,photo:i.image_src,title:i.name,subtitle:'',type:i.type,isMessengerUser:i.is_messenger_user,href:i.href});}};f.exports=h;},null);
__d('MessengerContactActions',['keyMirror'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirror')({MESSAGE:null,PROFILE:null,REMOVE:null,SELECT:null});},null);
__d('MessengerThreadImage.react',['immutable','ImmutableObject','MercuryIDs','MercuryThreadImage.react','MessengerProfileImageWrapper.react','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'MessengerThreadImage',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{participants:h.instanceOf(c('immutable').Map).isRequired,showBadge:h.bool,size:h.number,thread:h.instanceOf(c('ImmutableObject')).isRequired,viewer:h.string.isRequired},getDefaultProps:function(){return {showBadge:true};},render:function(){return (c('React').createElement(c('MessengerProfileImageWrapper.react'),{className:this.props.className,isMessengerUser:this._getIsMessengerUser(),size:this.props.size,showBadge:this.props.showBadge&&c('MercuryIDs').isCanonical(this.props.thread.thread_id)},c('React').createElement(c('MercuryThreadImage.react'),{size:this.props.size,thread:this.props.thread,viewer:this.props.viewer,useBackground:true})));},_getIsMessengerUser:function(){if(!c('MercuryIDs').isCanonical(this.props.thread.thread_id)||this.props.participants.size===0)return null;var j=this.props.thread.other_user_fbid,k=c('MercuryIDs').getParticipantIDFromUserID(j),l=this.props.participants.get(k);return l&&l.is_messenger_user;}});f.exports=i;},null);
__d('MessengerContactListRow.react',['cx','fbt','ix','Image.react','ImageBlock.react','ImmutableObject','Link.react','MercuryTypeaheadConstants','MessengerContactActions','MessengerContactImage.react','MessengerThreadImage.react','ReactComponentWithPureRenderMixin','React','ReactDOM','joinClasses'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=j('/images/mercury/clients/messenger/core/Checkmark.png'),m=32,n=c('React').createClass({displayName:'MessengerContactListRow',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{actionsClass:k.func,className:k.string,contact:k.instanceOf(c('ImmutableObject')).isRequired,disableRole:k.bool,extraActionsEnabled:k.bool.isRequired,isHighlighted:k.bool,isOriginal:k.bool,isSelected:k.bool,onMouseEnter:k.func,onScrollIntoView:k.func,onAction:k.func,presenceStatus:k.bool,viewer:k.string.isRequired,isAdmin:k.bool},getInitialState:function(){return {isActionsOpen:false};},componentDidMount:function(){if(this.props.isHighlighted&&this.props.onScrollIntoView){var o=c('ReactDOM').findDOMNode(this);this.props.onScrollIntoView&&this.props.onScrollIntoView(o);this.props.onRenderHighlight&&this.props.onRenderHighlight(o);}},componentDidUpdate:function(o){if(this.props.isHighlighted&&!o.isHighlighted){var p=c('ReactDOM').findDOMNode(this);this.props.onScrollIntoView&&this.props.onScrollIntoView(p);this.props.onRenderHighlight&&this.props.onRenderHighlight(p);}},render:function(){var o=this.props.disableRole?{}:{'aria-selected':this.props.isHighlighted,role:'option'};return (c('React').createElement('li',babelHelpers['extends']({},o,{className:c('joinClasses')(this.props.className,"_5l37"+(this.props.isHighlighted?' '+"_1k1p":'')+(this.state.isActionsOpen?' '+"_rwn":''))}),c('React').createElement(c('Link.react'),{className:"_5f0v",onClick:this._handleClick,onMouseDown:this._handleMouseDown,onMouseEnter:this.props.onMouseEnter,tabIndex:this.props.actionsClass?0:-1},c('React').createElement(c('ImageBlock.react'),{contentClassName:"_5l38",spacing:'medium'},this._renderContactImage(),this._renderContactText(),this._renderActions()))));},_handleMouseDown:function(o){if(this.props.actionsClass)return;o.stopPropagation();o.preventDefault();},_handleClick:function(o){o.stopPropagation();this._handleContactAction(c('MessengerContactActions').SELECT,o);},_renderContactImage:function(){if(this.props.contact.photo){return (c('React').createElement(c('MessengerContactImage.react'),{className:"_5l39 _5rmm",isMessengerUser:this.props.contact.isMessengerUser,size:m,src:this.props.contact.photo}));}else if(this.props.contact.type===c('MercuryTypeaheadConstants').THREAD_TYPE)return (c('React').createElement(c('MessengerThreadImage.react'),{className:"_5l39",participants:this.props.contact.participants,size:m,thread:this.props.contact.thread,viewer:this.props.viewer}));},_renderContactText:function(){if(this.props.contact.subtitle){return (c('React').createElement('div',null,c('React').createElement('div',{className:"_3q34"},this.props.contact.title),c('React').createElement('div',{className:"_3q35"},this.props.contact.subtitle)));}else return (c('React').createElement('div',{className:"_364g"},this.props.contact.title));},_renderActions:function(){if(this.props.isOriginal)return (c('React').createElement('span',{className:"_5rh4"},i._("A\u00f1adido(a)")));if(this.props.isSelected)return (c('React').createElement(c('Image.react'),{className:"_1kqm",src:l}));if(this.props.presenceStatus)return (c('React').createElement('div',{className:"_jg2"}));var o=null;if(this.props.isAdmin)o=c('React').createElement('span',{className:"_5qsj"},i._("Propietario"));if(this.props.actionsClass){var p=this.props.actionsClass;return (c('React').createElement('div',null,o,c('React').createElement(p,{className:"_rwo",contact:this.props.contact,extrasEnabled:this.props.extraActionsEnabled,isOpen:this.state.isActionsOpen,onAction:this._handleContactAction,onToggle:this._handleActionsToggle,viewer:this.props.viewer})));}return o;},_handleContactAction:function(o,event){this.props.onAction&&this.props.onAction(o,event);},_handleActionsToggle:function(o){this.setState({isActionsOpen:o});}});f.exports=n;},null);
__d('MessengerContactListRowContainer.react',['AvailableListConstants','immutable','MercuryIDs','MercuryParticipantTypes','MessengerContactActions','MessengerContactListRow.react','PresenceStatus','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'MessengerContactListRowContainer',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{actionsClass:h.func,contactAdapter:h.func.isRequired,disableRole:h.bool,extraActionsEnabled:h.bool.isRequired,hasHoverState:h.bool,isHighlighted:h.bool,onAction:h.func,onHighlight:h.func,onScrollIntoView:h.func,onSelect:h.func.isRequired,rawContact:h.object.isRequired,originalEntryIDs:h.instanceOf(c('immutable').Set),rowClassName:h.string,selectedEntryIDs:h.instanceOf(c('immutable').Set),showPresence:h.bool,viewer:h.string.isRequired,isAdmin:h.bool},getInitialState:function(){return {contact:this.props.contactAdapter(this.props.rawContact)};},componentWillReceiveProps:function(j){if(j.rawContact!==this.props.rawContact)this.setState({contact:j.contactAdapter(j.rawContact)});},render:function(){return (c('React').createElement(c('MessengerContactListRow.react'),{actionsClass:this.props.actionsClass,className:this.props.rowClassName,contact:this.state.contact,disableRole:this.props.disableRole,extraActionsEnabled:this.props.extraActionsEnabled,isHighlighted:this.props.isHighlighted,isOriginal:this.props.originalEntryIDs&&this.props.originalEntryIDs.contains(this.state.contact.uid),isSelected:this.props.selectedEntryIDs&&this.props.selectedEntryIDs.contains(this.state.contact.uid),onAction:this._handleAction,onRenderHighlight:this.props.onRenderHighlight,onScrollIntoView:this.props.onScrollIntoView,onMouseEnter:this._handleMouseEnter,onSelect:this._handleSelect,presenceStatus:this._getPresenceStatus(),viewer:this.props.viewer,isAdmin:this.props.isAdmin}));},_handleMouseEnter:function(){if(!this.props.hasHoverState)return;this.props.onHighlight&&this.props.onHighlight(this.props.rawContact);},_handleAction:function(j,event){switch(j){case c('MessengerContactActions').SELECT:this.props.onSelect(this.props.rawContact,event);break;default:this.props.onAction&&this.props.onAction(j,this.props.rawContact);break;}},_getPresenceStatus:function(){var j=this.state.contact;if(!this.props.showPresence||j.type!==c('MercuryParticipantTypes').FRIEND&&j.type!==c('MercuryParticipantTypes').USER)return false;var k=c('MercuryIDs').getUserIDFromParticipantID(j.uid);return c('PresenceStatus').get(k)==c('AvailableListConstants').ACTIVE;}});f.exports=i;},null);
__d('MessengerContactList.react',['cx','fbt','MessengerContactListRowContainer.react','ImageBlock.react','immutable','MessengerSpinner.react','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'MessengerContactList',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{actionsClass:j.func,ariaOwneeID:j.string,contactAdapter:j.func.isRequired,disableRole:j.bool,extraActionsEnabled:j.bool,hasHoverState:j.bool,highlightedEntry:j.object,isLoading:j.bool,listSections:j.instanceOf(c('immutable').OrderedMap).isRequired,onHighlight:j.func,onRenderHighlight:j.func,onScrollIntoView:j.func,onSelect:j.func.isRequired,onAction:j.func,originalEntryIDs:j.instanceOf(c('immutable').Set),queryString:j.string,rowClassName:j.string,selectedEntryIDs:j.instanceOf(c('immutable').Set),showPresence:j.bool,viewer:j.string.isRequired,adminIds:j.arrayOf(j.string)},render:function(){return (c('React').createElement('div',{className:this.props.className},this.props.listSections.map(this._renderListSection).toArray(),this._renderSpinner(),this._renderEmptyResult()));},_renderListSection:function(l,m){return (c('React').createElement('div',{key:m,className:"_29hk"},this._renderHeader(m),c('React').createElement('ul',{id:this.props.ariaOwneeID,role:this.props.disableRole?undefined:'listbox',className:"_29hl"},l.map(function(n){return (c('React').createElement(c('MessengerContactListRowContainer.react'),{actionsClass:this.props.actionsClass,contactAdapter:this.props.contactAdapter,disableRole:this.props.disableRole,extraActionsEnabled:!!this.props.extraActionsEnabled,hasHoverState:this.props.hasHoverState,isHighlighted:this.props.highlightedEntry===n,key:n.id||n.getUniqueID(),onHighlight:this.props.onHighlight,onAction:this.props.onAction,onRenderHighlight:this.props.onRenderHighlight,onSelect:this.props.onSelect,onScrollIntoView:this.props.onScrollIntoView,rawContact:n,originalEntryIDs:this.props.originalEntryIDs,rowClassName:this.props.rowClassName,selectedEntryIDs:this.props.selectedEntryIDs,showPresence:this.props.showPresence,viewer:this.props.viewer,isAdmin:this._isAdmin(n)}));}.bind(this)))));},_isAdmin:function(l){var m=l.fbid;if(!this.props.adminIds)return false;return this.props.adminIds.indexOf(m)!==-1;},_renderHeader:function(l){if(!l)return null;return (c('React').createElement('div',{className:"_225b"},l));},_renderSpinner:function(){if(!this.props.isLoading)return null;return (c('React').createElement(c('ImageBlock.react'),{className:"_225c",spacing:'medium'},c('React').createElement(c('MessengerSpinner.react'),{className:"_2i59",color:'grey'}),c('React').createElement('div',{className:"_4g0h"},i._("Buscando..."))));},_renderEmptyResult:function(){if(this.props.isLoading||this.props.listSections.size>0||!this.props.queryString||this.props.queryString.length===0)return null;return (c('React').createElement('div',{className:"_3xcx"},i._("No se han encontrado resultados")));}});f.exports=k;},null);
__d('MessengerTypeaheadView.react',['cx','immutable','MessengerContactAdapters','MessengerContactList.react','MessengerTypeaheadUtils','ReactComponentWithPureRenderMixin','React','joinClasses'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'MessengerTypeaheadView',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{ariaOwneeID:i.string,entries:i.array.isRequired,hasHoverState:i.bool,highlightedEntry:i.object,isLoading:i.bool,onHighlight:i.func,onRenderHighlight:i.func,onScrollIntoView:i.func,onSelect:i.func,order:i.array,originalEntryIDs:i.instanceOf(c('immutable').Set),queryString:i.string,selectedEntryIDs:i.instanceOf(c('immutable').Set),viewer:i.string.isRequired},render:function(){return (c('React').createElement(c('MessengerContactList.react'),{ariaOwneeID:this.props.ariaOwneeID,className:c('joinClasses')(this.props.className,"_5t4c"),contactAdapter:c('MessengerContactAdapters').fromSearchableEntry,hasHoverState:this.props.hasHoverState,highlightedEntry:this.props.highlightedEntry,isLoading:this.props.isLoading,listSections:c('MessengerTypeaheadUtils').buildListSections(this.props.entries,this.props.queryString,this.props.order),onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,originalEntryIDs:this.props.originalEntryIDs,queryString:this.props.queryString,selectedEntryIDs:this.props.selectedEntryIDs,showPresence:false,viewer:this.props.viewer}));}});f.exports=j;},null);
__d('MessengerSearchTypeahead.react',['cx','fbt','ix','AbstractTypeahead.react','Image.react','MercuryIDs','MercuryThreadIDMap','MercuryThreads','MercuryTypeaheadConstants','MercuryVanityIDMap','MessengerActions','MessengerSearchSource','MessengerTypeaheadUtils','MessengerTypeaheadView.react','React','TypeaheadNavigation','WorkModeConfig'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('MercuryThreadIDMap').get(),l=c('MercuryThreads').get(),m=c('React').PropTypes,n=j('/images/mercury/clients/messenger/threadlist/InboxThreadDismiss.png'),o=100,p=c('WorkModeConfig').is_work_user?undefined:[c('MercuryTypeaheadConstants').FRIEND_TYPE,c('MercuryTypeaheadConstants').THREAD_TYPE,c('MercuryTypeaheadConstants').FB4C_TYPE,c('MercuryTypeaheadConstants').PAGE_TYPE,c('MercuryTypeaheadConstants').MEETING_ROOM_PAGE_TYPE,c('MercuryTypeaheadConstants').NON_FRIEND_TYPE],q=c('React').createClass({displayName:'MessengerSearchTypeahead',propTypes:{isFacebookChat:m.bool,isFocused:m.bool,maxEntries:m.number,onBlur:m.func,onChange:m.func,onClear:m.func,onFocus:m.func,onSelect:m.func.isRequired,onScrollIntoView:m.func,queryString:m.string,viewer:m.string.isRequired},getInitialState:function(){return {isLoading:false};},componentWillMount:function(){this._moveUp=this.props.isFacebookChat?c('TypeaheadNavigation').moveDown:c('TypeaheadNavigation').moveUp;this._moveDown=this.props.isFacebookChat?c('TypeaheadNavigation').moveUp:c('TypeaheadNavigation').moveDown;},render:function(){var r=this.props.isFacebookChat?i._("Buscar"):i._("Busca personas y grupos");return (c('React').createElement('div',{className:"_3rh8"},c('React').createElement(c('AbstractTypeahead.react'),{autoHighlight:this.props.isFacebookChat,className:"_5iwm"+(this.props.isFocused||!!this.props.queryString?' '+"_5iwn":'')+(' '+"_150g"),inputClassName:"_3rhb",navigation:{moveUp:function(){return this._moveUp.apply(this,arguments);}.bind(this),moveDown:function(){return this._moveDown.apply(this,arguments);}.bind(this)},onBlur:this.props.onBlur,onChange:this.props.onChange,onFocus:this.props.onFocus,onSelectAttempt:this._handleSelect,placeholder:r,presenter:{ViewRenderer:c('MessengerTypeaheadView.react'),alwaysVisibleOnFocus:true,extraRendererProps:{className:"_11_d",hasHoverState:this.props.isFacebookChat,isLoading:this.state.isLoading,onScrollIntoView:this.props.onScrollIntoView,viewer:this.props.viewer,order:p},maxEntries:this.props.maxEntries||o,sortEntries:this._sortEntries,useLayer:false},queryString:this.props.queryString,role:'search',searchSource:c('MessengerSearchSource').getForFBID(this.props.viewer),searchSourceOptions:{onQueryFinished:this._handleQueryFinished,onQueryStarted:this._handleQueryStarted,showDefaultEntries:true},selectOnTab:true,showEntriesOnFocus:!this.props.isFacebookChat}),c('React').createElement(c('Image.react'),{onMouseDown:this.props.onClear,className:(!this.props.queryString?"hidden_elem":'')+(' '+"_2xme"),src:n})));},_handleQueryStarted:function(r){if(r===this.props.queryString)this.setState({isLoading:true});},_handleQueryFinished:function(r){if(r===this.props.queryString)this.setState({isLoading:false});},_sortEntries:function(r){return c('MessengerTypeaheadUtils').sortEntries(r,this.props.queryString);},_handleSelect:function(r){var s=r.getUniqueID(),t=r.getType(),u=r.getAuxiliaryData().alias;if(u)c('MercuryVanityIDMap').set(u,c('MercuryIDs').getParticipantIDFromUserID(s));if(t===c('MercuryTypeaheadConstants').THREAD_TYPE){k.getClientIDFromServerID(s,function(v){this.props.onSelect(v,t);}.bind(this));}else l.getThreadMeta(c('MercuryIDs').getThreadIDFromUserID(s),function(v){this.props.onSelect(v.thread_id,t);}.bind(this));}});f.exports=q;},null);
__d('ChatTypeaheadWrapper.react',['cx','Arbiter','Bootloader','ChatConfig','ChatOpenTab','ChatSidebarComposeLink.react','ChatSidebarSections','ChatSidebarSheet.react','MessengerSearchTypeahead.react','React','Run','emptyFunction','getActiveElement'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=40,j=c('ChatConfig').get('divebar_rounded_profile',false);function k(m){c('Arbiter').inform('sidebar/typeahead/active',m);}var l=c('React').createClass({displayName:'ChatTypeaheadWrapper',getInitialState:function(){return {height:0,value:'',isSearching:false,dropdownComponent:null};},componentDidMount:function(){if(this.props.isSidebar){c('Arbiter').subscribe('sidebar/resized',function(m,n){this.setState({height:n});}.bind(this));c('Run').onAfterLoad(function(){c('Bootloader').loadModules(["ChatSidebarDropdown.react","SidebarType","ChatSidebarActions"],function(m,n,o){this.setState({dropdownComponent:c('React').createElement(m,{sidebarType:n.SIDEBAR,onToggleSidebar:o.disable})});}.bind(this));}.bind(this));}else c('Arbiter').subscribe('buddyList/resized',function(m,n){this.setState({height:n});}.bind(this));},componentWillUpdate:function(m,n){if(n.isSearching!==this.state.isSearching)k(n.isSearching);},render:function(){var m=this.state.height!=null?Math.floor((this.state.height-i*2)/i):null;return (c('React').createElement('div',{className:!j?"squareProfile":''},c('React').createElement(c('ChatSidebarSheet.react'),null),c('React').createElement(c('MessengerSearchTypeahead.react'),{isFacebookChat:true,isFocused:true,maxEntries:m,queryString:this.state.value,viewer:this.props.id,onBlur:function(){return this.setState({isSearching:false,value:''});}.bind(this),onChange:function(n){var o=n.target.value;this.setState({isSearching:o!=='',value:o});}.bind(this),onClear:c('emptyFunction'),onFocus:c('emptyFunction'),onScrollIntoView:c('emptyFunction'),onSelect:function(n,o){c('getActiveElement')().blur();c('ChatOpenTab').openTabByType(n,o,c('ChatSidebarSections').TYPEAHEAD);}}),this.props.isSidebar?c('React').createElement('div',{className:"_531b"},this.state.dropdownComponent,c('React').createElement(c('ChatSidebarComposeLink.react'),{className:"_3a-4 _5q85"})):null));}});f.exports=l;},null);
__d('ChatTypeaheadCore',['ChatTypeaheadWrapper.react','React','ReactDOM'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={init:function(i,j,k){c('ReactDOM').render(c('React').createElement(c('ChatTypeaheadWrapper.react'),{id:j,isSidebar:k}),i);}};f.exports=h;},null);
__d('NotificationBeeperItemCloseButton.react',['cx','fbt','React','XUIAbstractGlyphButton.react'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').createClass({displayName:'NotificationBeeperItemCloseButton',render:function(){return (c('React').createElement(c('XUIAbstractGlyphButton.react'),babelHelpers['extends']({},this.props,{className:"_3soc",title:i._("Cerrar")})));}});f.exports=j;},null);
__d('SyncRequestAcceptedMessage.react',['fbt','cx','React'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'SyncRequestAcceptedMessage',propTypes:{appName:j.string.isRequired,isSender:j.bool.isRequired,receiverName:j.string.isRequired,senderName:j.string.isRequired},render:function(){if(this.props.isSender){return (c('React').createElement('div',null,h._("{receiver} accepted your invite to play {app name}.",[h.param('receiver',c('React').createElement('span',{className:"_dg4"},this.props.receiverName)),h.param('app name',c('React').createElement('span',{className:"_dg5"},this.props.appName))])));}else return (c('React').createElement('div',null,h._("You accepted an invite from {sender} to play {app name}.",[h.param('sender',c('React').createElement('span',{className:"_dg4"},this.props.senderName)),h.param('app name',c('React').createElement('span',{className:"_dg5"},this.props.appName))])));}});f.exports=k;},null);
__d('SyncRequestCanceledMessage.react',['cx','fbt','React'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'SyncRequestCanceledMessage',propTypes:{appName:j.string.isRequired,isSender:j.bool.isRequired,receiverName:j.string.isRequired,senderName:j.string.isRequired},render:function(){if(this.props.isSender){return (c('React').createElement('div',null,i._("You canceled an invite to {receiver} to play {app name}.",[i.param('receiver',c('React').createElement('span',{className:"_dg4"},this.props.receiverName)),i.param('app name',c('React').createElement('span',{className:"_dg5"},this.props.appName))])));}else return (c('React').createElement('div',null,i._("{sender} canceled an invitation to play {app name}.",[i.param('sender',c('React').createElement('span',{className:"_dg4"},this.props.senderName)),i.param('app name',c('React').createElement('span',{className:"_dg5"},this.props.appName))])));}});f.exports=k;},null);
__d('SyncRequestExpiredMessage.react',['fbt','cx','React'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'SyncRequestExpiredMessage',propTypes:{appName:j.string.isRequired,isSender:j.bool.isRequired,receiverName:j.string.isRequired,senderName:j.string.isRequired},render:function(){if(this.props.isSender){return (c('React').createElement('div',null,h._("{receiver} missed your invite to play {app name}.",[h.param('receiver',c('React').createElement('span',{className:"_dg4"},this.props.receiverName)),h.param('app name',c('React').createElement('span',{className:"_dg5"},this.props.appName))])));}else return (c('React').createElement('div',null,h._("You missed an invite from {sender} to play {app name}.",[h.param('sender',c('React').createElement('span',{className:"_dg4"},this.props.senderName)),h.param('app name',c('React').createElement('span',{className:"_dg5"},this.props.appName))])));}});f.exports=k;},null);
__d('SyncRequestRejectedMessage.react',['cx','fbt','AsyncRequest','Link.react','React','URI'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'SyncRequestRejectedMessage',propTypes:{requestId:j.string.isRequired,app:j.object.isRequired,isSender:j.bool.isRequired,receiver:j.object.isRequired,sender:j.object.isRequired},render:function(){if(this.props.isSender){return (c('React').createElement('div',null,i._("{receiver} declined your invite to play {app_name}.",[i.param('receiver',c('React').createElement('span',{className:"_dg4"},this.props.receiver.name)),i.param('app_name',c('React').createElement('span',{className:"_dg5"},this.props.app.name))])));}else return (c('React').createElement('div',null,i._("You declined an invite from {sender} to play {app_name}.",[i.param('sender',c('React').createElement('span',{className:"_dg4"},this.props.sender.name)),i.param('app_name',c('React').createElement('span',{className:"_dg5"},this.props.app.name))]),c('React').createElement('div',{className:"_13n7"},c('React').createElement('div',null,c('React').createElement(c('Link.react'),{onClick:this._submitBlockApp},i._("Block {app}",[i.param('app',this.props.app.name)]))),c('React').createElement('div',null,c('React').createElement(c('Link.react'),{onClick:this._submitBlockUser},i._("Block requests from {sender}",[i.param('sender',this.props.sender.name)]))))));},_submitBlockApp:function(){var l=new (c('URI'))('/games/block_app/'),m=new (c('AsyncRequest'))().setURI(l);m.setData({app_id:this.props.app.id,source:'sync_request'});m.send();},_submitBlockUser:function(){var l=new (c('URI'))('/games/block_user/'),m=new (c('AsyncRequest'))().setURI(l);m.setData({app_id:this.props.app.id,blockee_uid:this.props.sender.id});m.send();}});f.exports=k;},null);
__d('SyncRequestTimer.react',['fbt','React'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes;function j(l){if(l){l=Math.ceil(l);var m=l%60;if(m<10)m='0'+m;var n=Math.floor(l/60);return n+':'+m;}else return "0:00";}var k=c('React').createClass({displayName:'SyncRequestTimer',propTypes:{timeRemaining:i.number.isRequired,isSender:i.bool.isRequired,receiverName:i.string.isRequired},render:function(){if(this.props.isSender){return (c('React').createElement('div',null,h._("({time_remaining} remaining)",[h.param('time_remaining',j(this.props.timeRemaining))])));}else return (c('React').createElement('div',null,h._("You have {time_remaining} to accept.",[h.param('time_remaining',j(this.props.timeRemaining))])));}});f.exports=k;},null);
__d('SyncRequestTitle.react',['fbt','cx','React'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'SyncRequestTitle',propTypes:{appName:j.string.isRequired,isSender:j.bool.isRequired,receiverName:j.string.isRequired,senderName:j.string.isRequired},render:function(){if(this.props.isSender){return (c('React').createElement('div',null,h._("Waiting for {receiver} to accept your invite to play {app_name}.",[h.param('receiver',c('React').createElement('span',{className:"_dg4"},this.props.receiverName)),h.param('app_name',c('React').createElement('span',{className:"_dg5"},this.props.appName))])));}else return (c('React').createElement('div',null,h._("{sender} wants to play {app_name} with you, right now.",[h.param('sender',c('React').createElement('span',{className:"_dg4"},this.props.senderName)),h.param('app_name',c('React').createElement('span',{className:"_dg5"},this.props.appName))])));}});f.exports=k;},null);
__d("XSyncRequestSubmitController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/platform\/games\/sync_requests\/submit\/",{request_id:{type:"Int",required:true},sender:{type:"Int",required:true},action:{type:"Int",required:true}});},null);
__d('SyncRequest.react',['cx','fbt','Arbiter','AsyncRequest','ChannelConstants','React','SyncRequestStatusEnum','SyncRequestTitle.react','SyncRequestAcceptedMessage.react','SyncRequestRejectedMessage.react','SyncRequestExpiredMessage.react','SyncRequestCanceledMessage.react','SyncRequestTimer.react','XUIButton.react','XSyncRequestSubmitController','getObjectValues'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'SyncRequest',propTypes:{app:j.object.isRequired,creationTime:j.number.isRequired,requestId:j.string.isRequired,receiver:j.object.isRequired,sender:j.object.isRequired,status:j.oneOf(c('getObjectValues')(c('SyncRequestStatusEnum'))).isRequired,timeout:j.number.isRequired,timeRemaining:j.number.isRequired,viewerId:j.number.isRequired,onStatusUpdate:j.func},componentWillMount:function(){if(this.props.status===c('SyncRequestStatusEnum').PENDING){var l=c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('sync_request_updated'),function(o,p){p=p.obj;if(p.id.toString()!==this.props.requestId)return;this.setState({status:p.status});}.bind(this));this.setState({statusEvent:l});}var m=null;if(this.props.status===c('SyncRequestStatusEnum').PENDING){var n=function(){this.setState({time_remaining:this.state.time_remaining-1});if(this.state.time_remaining<=0){clearInterval(this.state.counter);var o={counter:null,time_remaining:0};if(this.state.status===c('SyncRequestStatusEnum').PENDING)o.status=c('SyncRequestStatusEnum').EXPIRED;this.setState(o);}};m=setInterval(n.bind(this),1000);}this.setState({time_remaining:this.props.timeRemaining,counter:m});},componentWillUnmount:function(){if(this.state.counter)clearInterval(this.state.counter);c('Arbiter').unsubscribe(this.state.statusEvent);},getInitialState:function(){return {buttonsDisabled:false,time:Date.now(),status:this.props.status,viewerIsSender:this.props.viewerId===this.props.sender.id};},componentDidUpdate:function(l,m){if(this.props.status!=c('SyncRequestStatusEnum').PENDING)this.state.status=this.props.status;if(this.props.onStatusUpdate)this.props.onStatusUpdate(this.state.status,m.status);},render:function(){var l;switch(this.state.status){case c('SyncRequestStatusEnum').PENDING:var m;if(!this.state.viewerIsSender){m=[c('React').createElement(c('XUIButton.react'),{use:'confirm',onClick:this._handleAccept,disabled:this.state.buttonsDisabled,label:i._("Accept")}),c('React').createElement(c('XUIButton.react'),{use:'default',onClick:this._handleReject,disabled:this.state.buttonsDisabled,label:i._("Decline")})];}else m=c('React').createElement(c('XUIButton.react'),{use:'default',onClick:this._handleCancel,disabled:this.state.buttonsDisabled,label:i._("Cancel")});l=c('React').createElement('div',null,c('React').createElement('div',{className:"_372m"},c('React').createElement(c('SyncRequestTitle.react'),{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name})),c('React').createElement('div',{className:"_372n"},c('React').createElement(c('SyncRequestTimer.react'),{isSender:this.state.viewerIsSender,timeRemaining:this.state.time_remaining,receiverName:this.props.receiver.name})),c('React').createElement('div',{className:"_372o"},m));break;case c('SyncRequestStatusEnum').ACCEPTED:l=c('React').createElement('div',{className:"_372p mvs"},c('React').createElement(c('SyncRequestAcceptedMessage.react'),{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;case c('SyncRequestStatusEnum').REJECTED:l=c('React').createElement('div',{className:"_372p mvs"},c('React').createElement(c('SyncRequestRejectedMessage.react'),{requestId:this.props.requestId,app:this.props.app,isSender:this.state.viewerIsSender,receiver:this.props.receiver,sender:this.props.sender}));break;case c('SyncRequestStatusEnum').EXPIRED:l=c('React').createElement('div',{className:"_372p mvs"},c('React').createElement(c('SyncRequestExpiredMessage.react'),{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;case c('SyncRequestStatusEnum').CANCELED:l=c('React').createElement('div',{className:"_372p mvs"},c('React').createElement(c('SyncRequestCanceledMessage.react'),{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;default:throw new Error('The request status `%s` is unknown.',this.state.status);}return (c('React').createElement('div',{className:"_372q"},l));},_handleAccept:function(){this._handleStatusUpdate(c('SyncRequestStatusEnum').ACCEPTED);var l=window.open(this.props.app.uri);if(l)l.focus();},_handleReject:function(){this._handleStatusUpdate(c('SyncRequestStatusEnum').REJECTED);},_handleCancel:function(){this._handleStatusUpdate(c('SyncRequestStatusEnum').CANCELED);},_handleStatusUpdate:function(l){this.setState({status:l,buttonsDisabled:true});var m=c('XSyncRequestSubmitController').getURIBuilder().setInt('request_id',this.props.requestId).setInt('sender',this.props.sender.id).setInt('action',l).getURI();new (c('AsyncRequest'))().setURI(m).setHandler(function(n){this.setState({status:l});}.bind(this)).setErrorHandler(function(n){this.setState({buttonsDisabled:false});}.bind(this)).send();}});f.exports=k;},null);
__d('isSoftNewlineEvent',['Keys'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){return i.which===c('Keys').RETURN&&(i.getModifierState('Shift')||i.getModifierState('Alt')||i.getModifierState('Control'));}f.exports=h;},null);
__d('getTextAfterNearestEntity',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j){var k=j;while(k>0&&i.getEntityAt(k-1)===null)k--;return i.getText().slice(k,j);}f.exports=h;},null);
__d('applyEmoticonToContentState',['EmoticonsList','applyEmoticonToContentBlock','getTextAfterNearestEntity'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=new RegExp(c('EmoticonsList').regexp.source,'g');function i(j,k){var l=k.getAnchorKey(),m=k.getAnchorOffset(),n=j.getBlockForKey(l),o=c('getTextAfterNearestEntity')(n,m),p,q;while(q!==null){q=h.exec(o);if(q!==null)p=q;}if(!p)return j;var r=p[1];if(!r&&m!==o.length)return j;var s=p[2],t=m-o.length,u=t+p.index+p[1].length,v=j.getBlockMap().set(l,c('applyEmoticonToContentBlock')(n,s,u));m-=s.length-1;return j.merge({blockMap:v,selectionBefore:k,selectionAfter:k.merge({anchorOffset:m,focusOffset:m})});}f.exports=i;},null);
__d('handleBeforeInputForEmoticon',['DraftModifier','EditorState','applyEmoticonToContentState'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=new RegExp(/[\s'".,!?]/);function i(j,k){var l=j.getSelection();if(!l.isCollapsed()||!k||!h.test(k))return j;var m=j.getCurrentContent(),n=c('applyEmoticonToContentState')(m,l);if(n===m)return j;var o=c('DraftModifier').insertText(n,n.getSelectionAfter(),k);return c('EditorState').push(j,o,'insert-characters');}f.exports=i;},null);
__d('handleSoftNewlineForEmoticon',['DraftModifier','EditorState','applyEmoticonToContentState'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){var j=i.getCurrentContent(),k=i.getSelection(),l=c('applyEmoticonToContentState')(j,k);if(l===j)return i;var m=c('DraftModifier').splitBlock(l,l.getSelectionAfter());return c('EditorState').push(i,m,'split-block');}f.exports=h;},null);
__d("XQuickPromotionSimpleLoggingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/qp\/action\/log\/",{qp_id:{type:"Int",required:true},qp_action:{type:"Enum",enumType:1},qp_instance_log_data:{type:"StringToStringMap",defaultValue:{}},qp_event:{type:"String"}});},null);
__d('QPRenderer',['$','CSS','XQuickPromotionSimpleLoggingController','AsyncSignal'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=function(m,event,n){var o=c('XQuickPromotionSimpleLoggingController').getURIBuilder().setInt('qp_id',m).setString('qp_event',event).setStringToStringMap('qp_instance_log_data',n).getURI();new (c('AsyncSignal'))(o,{}).send();},i=function(m,n,o){var p=c('XQuickPromotionSimpleLoggingController').getURIBuilder().setInt('qp_id',m).setEnum('qp_action',n).setStringToStringMap('qp_instance_log_data',o).getURI();new (c('AsyncSignal'))(p,{}).send();},j=function(m,n,o,p,q,r){l(m,o,c('$')(p),r,function(){if(q)c('CSS').hide(n);});},k=function(m,n,o){n.show();h(m,'view',{});n.subscribe('cancel',function(){h(m,'dialog_cancel',{});});for(var p=0;p<o.length;p++){var q=o[p],r=c('$')(q.element_id);l(m,q.action,r,q.instance_log_data,function(){if(q.should_close)n.hide();});if(q.action=='primary')r.focus();}},l=function(m,n,o,p,q){o.addEventListener('click',function(){var r=c('XQuickPromotionSimpleLoggingController').getURIBuilder().setInt('qp_id',m).setEnum('qp_action',n).setStringToStringMap('qp_instance_log_data',p).getURI();new (c('AsyncSignal'))(r,{}).send();q();});};g.setAction=j;g.setDialogActionsAndShow=k;g.logAction=i;g.logEvent=h;},null);
__d("XGamesGripperNoteUpdaterController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/async\/games\/gripper_note_viewed\/",{});},null);
__d('SidebarAppTickerResizer',['cx','Animation','Arbiter','AsyncRequest','ChatSidebarActions','ChatSidebarStore','CSS','debounce','Event','SidebarType','SimpleDrag','TickerController','$','ge','queryThenMutateDOM','XGamesGripperNoteUpdaterController'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=1e-07,j=1,k=85,l=173,m=300,n=46,o=90,p=82,q=150;function r(s,t,u,v,w){'use strict';this.$SidebarAppTickerResizer1=c('$')('pagelet_ticker');this.$SidebarAppTickerResizer2=c('$')('pagelet_canvas_nav_content');this.$SidebarAppTickerResizer3=this.$SidebarAppTickerResizer1.parentNode;this.$SidebarAppTickerResizer4=w;this.$SidebarAppTickerResizer2.style.height=u;this.$SidebarAppTickerResizer5(s,t);if(u===null)if(v!==null){this.$SidebarAppTickerResizer6();this.$SidebarAppTickerResizer7(this.$SidebarAppTickerResizer8());}else c('Arbiter').subscribe('AppsDivebar/show-apps',this.$SidebarAppTickerResizer6.bind(this));if(!w){this.$SidebarAppTickerResizer9();c('CSS').hide(s);}c('Arbiter').subscribe('ChatSidebarDropdown/closeTicker',this.$SidebarAppTickerResizer9.bind(this));c('Arbiter').subscribe('ChatSidebarDropdown/openTicker',this.$SidebarAppTickerResizer10.bind(this));c('Arbiter').subscribe('sidebar/visibility',function(ca,da){if(da)this.$SidebarAppTickerResizer11();}.bind(this));if(v){var x=c('ge')('pagelet_ticker'),y=x&&x.parentNode,z,aa=function(){v.hide();if(z)z.unsubscribe();},ba=function(){if(!c('CSS').shown(y))return;var ca=c('XGamesGripperNoteUpdaterController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(ca).send();v.show();if(z)z.unsubscribe();z=c('Arbiter').subscribe('sidebar/visibility',function(da,ea){if(!ea)aa();});};if(y&&c('CSS').shown(y)){ba();}else z=c('Arbiter').subscribe('ticker/show',ba);}this.$SidebarAppTickerResizer12=c('debounce')(this.$SidebarAppTickerResizer6.bind(this),200);c('Event').listen(window,'resize',this.$SidebarAppTickerResizer12);c('Arbiter').inform('Ticker/resized');}r.prototype.$SidebarAppTickerResizer11=function(){'use strict';c('TickerController').show(this.$SidebarAppTickerResizer1);};r.prototype.$SidebarAppTickerResizer6=function(s){'use strict';c('queryThenMutateDOM')(function(){this.$SidebarAppTickerResizer13();}.bind(this),function(){var t=Math.round(parseFloat(this.$SidebarAppTickerResizer1.style.height));if(t>Math.round(this.$SidebarAppTickerResizer14())||this.$SidebarAppTickerResizer15&&this.$SidebarAppTickerResizer15>j){var u=this.$SidebarAppTickerResizer15/this.$SidebarAppTickerResizer16*100,v=this.$SidebarAppTickerResizer17(0,this.$SidebarAppTickerResizer14()-u);if(!(s&&s.type==='resize'))this.$SidebarAppTickerResizer18(v);c('ChatSidebarActions').show();}}.bind(this));};r.prototype.$SidebarAppTickerResizer14=function(){'use strict';if(!this.$SidebarAppTickerResizer4)return 0;if(c('ChatSidebarStore').getVisibleType()!==c('SidebarType').SIDEBAR)return o;return Math.min(o,(this.$SidebarAppTickerResizer16-this.$SidebarAppTickerResizer19-p)*100/this.$SidebarAppTickerResizer16);};r.prototype.$SidebarAppTickerResizer5=function(s,t){'use strict';var u=new (c('SimpleDrag'))(s);u.subscribe('start',this.$SidebarAppTickerResizer20.bind(this));u.subscribe(['update','end'],this.$SidebarAppTickerResizer21.bind(this));var v=new (c('SimpleDrag'))(t);v.subscribe('start',this.$SidebarAppTickerResizer20.bind(this));v.subscribe('update',this.$SidebarAppTickerResizer22.bind(this));v.subscribe('end',this.$SidebarAppTickerResizer23.bind(this));};r.prototype.$SidebarAppTickerResizer20=function(s,event){'use strict';this.$SidebarAppTickerResizer24=event.clientY;this.$SidebarAppTickerResizer13();this.$SidebarAppTickerResizer25();};r.prototype.$SidebarAppTickerResizer13=function(){'use strict';this.$SidebarAppTickerResizer19=this.$SidebarAppTickerResizer2.offsetTop;this.$SidebarAppTickerResizer26=this.$SidebarAppTickerResizer1.offsetHeight;this.$SidebarAppTickerResizer16=this.$SidebarAppTickerResizer3.offsetHeight;this.$SidebarAppTickerResizer15=this.$SidebarAppTickerResizer2.offsetHeight;this.$SidebarAppTickerResizer27=this.$SidebarAppTickerResizer15;};r.prototype.$SidebarAppTickerResizer25=function(){'use strict';c('CSS').addClass(this.$SidebarAppTickerResizer3,"_4vfq");};r.prototype.$SidebarAppTickerResizer28=function(){'use strict';c('CSS').removeClass(this.$SidebarAppTickerResizer3,"_4vfq");};r.prototype.$SidebarAppTickerResizer21=function(s,event){'use strict';var t=this.$SidebarAppTickerResizer15/this.$SidebarAppTickerResizer16*100,u=this.$SidebarAppTickerResizer17(event.clientY-this.$SidebarAppTickerResizer24,this.$SidebarAppTickerResizer14()-t);if(s=='end'){this.$SidebarAppTickerResizer28();this.$SidebarAppTickerResizer18(u);}c('ChatSidebarActions').show();};r.prototype.$SidebarAppTickerResizer22=function(s,event){'use strict';var t=-this.$SidebarAppTickerResizer15,u=this.$SidebarAppTickerResizer8()-this.$SidebarAppTickerResizer15,v=this.$SidebarAppTickerResizer29(event.clientY-this.$SidebarAppTickerResizer24,t,u);this.$SidebarAppTickerResizer17(-v,this.$SidebarAppTickerResizer14());this.$SidebarAppTickerResizer27=this.$SidebarAppTickerResizer15+v;this.$SidebarAppTickerResizer27=Math.max(j,this.$SidebarAppTickerResizer27);this.$SidebarAppTickerResizer2.style.height=this.$SidebarAppTickerResizer27+'px';};r.prototype.$SidebarAppTickerResizer23=function(s,event){'use strict';var t=this.$SidebarAppTickerResizer27,u=this.$SidebarAppTickerResizer30(this.$SidebarAppTickerResizer27),v=this.$SidebarAppTickerResizer17(this.$SidebarAppTickerResizer15-u,this.$SidebarAppTickerResizer14());if(this.$SidebarAppTickerResizer15!=u){this.$SidebarAppTickerResizer7(u);this.$SidebarAppTickerResizer18(v);}new (c('Animation'))(this.$SidebarAppTickerResizer2).from('height',t).to('height',u).duration(m).go();};r.prototype.$SidebarAppTickerResizer17=function(s,t){'use strict';var u=this.$SidebarAppTickerResizer26+s,v=u/this.$SidebarAppTickerResizer16*100;v=Math.max(i,Math.min(t,v));this.$SidebarAppTickerResizer1.style.height=v+'%';if(v!=i){c('CSS').removeClass(this.$SidebarAppTickerResizer1,'hidden_elem');this.$SidebarAppTickerResizer11();}return v;};r.prototype.$SidebarAppTickerResizer30=function(s){'use strict';var t=this.$SidebarAppTickerResizer31(),u=this.$SidebarAppTickerResizer8();return s<u-n?s<t-n?j:t:u;};r.prototype.$SidebarAppTickerResizer31=function(){'use strict';return k;};r.prototype.$SidebarAppTickerResizer8=function(){'use strict';return l;};r.prototype.$SidebarAppTickerResizer32=function(s){'use strict';var t=this.$SidebarAppTickerResizer8();return s<0?j:s>t?t:s;};r.prototype.$SidebarAppTickerResizer29=function(s,t,u){'use strict';return s<t?t:s>u?u:s;};r.prototype.$SidebarAppTickerResizer18=function(s){'use strict';new (c('AsyncRequest'))('/ajax/feed/ticker/resize').setData({height:''+s}).setMethod('POST').send();c('Arbiter').inform('Ticker/resized');};r.prototype.$SidebarAppTickerResizer7=function(s){'use strict';new (c('AsyncRequest'))('/ajax/feed/apps/resize').setData({height:''+s}).setMethod('POST').send();};r.prototype.$SidebarAppTickerResizer33=function(s){'use strict';var t=this.$SidebarAppTickerResizer26,u=this.$SidebarAppTickerResizer16*s/100;new (c('Animation'))(this.$SidebarAppTickerResizer1).from('height',t).to('height',u).duration(q).ondone(function(){this.$SidebarAppTickerResizer1.style.height=s+'%';this.$SidebarAppTickerResizer18(s===0?'0.0':s);c('ChatSidebarActions').show();}.bind(this)).go();};r.prototype.$SidebarAppTickerResizer9=function(){'use strict';this.$SidebarAppTickerResizer13();this.$SidebarAppTickerResizer33(0);};r.prototype.$SidebarAppTickerResizer10=function(){'use strict';this.$SidebarAppTickerResizer1.style.height='40px';c('TickerController').show(this.$SidebarAppTickerResizer1,function(){this.$SidebarAppTickerResizer13();var s=(this.$SidebarAppTickerResizer16-this.$SidebarAppTickerResizer19-p-this.$SidebarAppTickerResizer15)*50/this.$SidebarAppTickerResizer16;this.$SidebarAppTickerResizer33(s);}.bind(this));};f.exports=r;},null);
__d('JewelQPLogging',['QPRenderer'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=false,i=null,j=false;function k(){if(j)return;if(h&&i){j=true;c('QPRenderer').logEvent(i.promotion_id,'view',i.instance_log_data?i.instance_log_data:{});}}var l={onJewelOpened:function(){h=true;k();},updateQPLogData:function(m){i=m;k();}};f.exports=l;},null);
__d('RequestsJewel',['fbt','Animation','AccessibilityLogger','Arbiter','AsyncRequest','AsyncSignal','ChannelConstants','CSS','DOM','Event','LinkController','Parent','ScrollableArea','Vector','MarauderLogger','$','debounce','ge','shield','JewelQPLogging','requireWeak'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=null;c('requireWeak')('FriendBrowserCheckboxController',function(n){return i=n;});var j=530,k=30,l=160;Object.assign(m,{instance:null,getInstance:function(){return m.instance;},replaceJewelTitle:function(n,o){c('DOM').setContent(c('$')(n),o);},updateFromDOM:function(){if(m.instance)m.instance.fromDom();},setInitialHeight:function(){if(m.instance)m.instance.setHeight();},maybeLoadJewel:function(){if(m.instance)m.instance.maybeLoadJewel();}});function m(n,o,p){'use strict';var q=o;if(typeof o!=='string'){q=o.inbox_folder;p=o.do_new_mark_read;}m.instance=this;this.countNew=0;this.jewel=n;this.jewelFlyoutCase=n.getRoot();this.jewelFlyout=c('ge')('fbRequestsFlyout');this.newCountSpan=c('ge')('newRequestCount');this.folder=q;this.doNewMarkRead=p;this.openTimestamp=0;this.$RequestsJewel1={};this.$RequestsJewel2=0;this.shouldClearPredictionAssocOnClick=false;this.$RequestsJewel3=-1;var r=c('ge')('requestsMarkReadButton');if(r)c('Event').listen(r,'click',c('shield')(this.$RequestsJewel4,this));this.jewel.subscribe('marked-seen',c('shield')(this.$RequestsJewel5,this));this.jewel.subscribe('closed',c('shield')(this.$RequestsJewel6,this));this.jewel.subscribe('updated',this.$RequestsJewel7.bind(this));this.jewel.subscribe('opened',this.$RequestsJewel8.bind(this));c('LinkController').registerHandler(this.$RequestsJewel9.bind(this));c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('jewel_requests_add'),this.$RequestsJewel10.bind(this));c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('jewel_friending_notifs'),this.$RequestsJewel11.bind(this));c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('jewel_requests_remove_old'),this.$RequestsJewel12.bind(this));c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('friend_requests_seen'),this.$RequestsJewel13.bind(this));c('Event').listen(this.jewelFlyout,'submit',function(t){var u=c('Parent').byClass(t.getTarget(),'objectListItem');if(u){c('CSS').removeClass(u,'jewelItemNew');c('CSS').addClass(u,'jewelItemResponded');}}.bind(this));var s=c('DOM').find(c('ge')('fbRequestsJewel'),'a[rel="toggle"]');c('Event').listen(s,'focus',function(t){c('AccessibilityLogger').logFocusIn();}.bind(this));this.setupScroll();c('Event').listen(window,'resize',c('debounce')(function(){this.$RequestsJewel14();}.bind(this)));c('Arbiter').subscribe('pymk-x-out',this.$RequestsJewel15.bind(this));}m.prototype.setupScroll=function(){'use strict';var n=c('DOM').scry(this.jewelFlyout,'.uiScrollableAreaWrap')[0];if(n){this.$RequestsJewel16=n;this.$RequestsJewel17=0;this.$RequestsJewel18=c('Event').listen(n,'scroll',this.$RequestsJewel19.bind(this),c('Event').Priority.$RequestsJewel20);this.$RequestsJewel15();}};m.prototype.fromDom=function(){'use strict';c('DOM').scry(this.jewelFlyout,'.jewelItemList li.objectListItem').forEach(function(n){var o=n.getAttribute('id');if(o){var p=c('ge')(o+'_status'),q=this.$RequestsJewel21(o);if(q.requester)this.$RequestsJewel1[q.requester]=o;++this.$RequestsJewel2;}}.bind(this));this.$RequestsJewel22();};m.prototype.$RequestsJewel23=function(n){'use strict';var o=n.match(/^(\d+)_(\d+)/);return o?{requester:o[1],type:o[2]}:undefined;};m.prototype.$RequestsJewel21=function(n){'use strict';var o=n?this.$RequestsJewel23(n):undefined,p;if(o&&o.requester){p=parseInt(o.requester,10);if(isNaN(p))p=undefined;}var q;if(o&&o.type){q=parseInt(o.type,10);if(isNaN(q))q=undefined;}return {requester:p,type:q};};m.prototype.$RequestsJewel24=function(){'use strict';if(this.countNew>0)this.countNew-=1;};m.prototype.$RequestsJewel9=function(n,event){'use strict';var o=c('Parent').byClass(n,'jewelItemNew');if(o&&c('Parent').byClass(o,'fbRequestList')&&c('Parent').byClass(o,'beeperEnabled')){var p=this.$RequestsJewel23(o.id);p&&this.$RequestsJewel5(p.requester,p.type);this.$RequestsJewel24();c('Arbiter').inform('jewel/count-updated',{jewel:'requests',count:this.countNew});c('CSS').removeClass(o,'jewelItemNew');}return true;};m.prototype.$RequestsJewel25=function(){'use strict';return c('DOM').scry(this.jewelFlyout,'.uiScrollableArea')[0];};m.prototype.$RequestsJewel19=function(){'use strict';var n=c('DOM').scry(this.$RequestsJewel16,'.uiMorePager');if(!n)return;var o=n.pop();if(o){var p=c('Vector').getElementPosition(o,'viewport').y;if(p>0)c('CSS').addClass(c('Parent').byClass(this.$RequestsJewel16,'uiScrollableArea'),'contentAfter');var q=c('DOM').find(o,'a');if(!q)return;var r=c('Vector').getElementPosition(q,'viewport').y;if(r==this.$RequestsJewel17)return;var s=c('Vector').getElementPosition(this.$RequestsJewel16,'viewport').y+c('Vector').getElementDimensions(this.$RequestsJewel16).y;if(r-300<s&&r>0){this.$RequestsJewel17=r;var t=q.getAttribute('ajaxify');if(t){new (c('AsyncRequest'))(t).setRelativeTo(q).setStatusElement(c('Parent').byClass(q,'stat_elem')).send();}else i&&i.getInstance('jewel').showMore();}}this.$RequestsJewel15();};m.prototype.$RequestsJewel11=function(n,o){'use strict';if(!o||this.jewel.isOpen())return;if(o.obj.notif_type!=='friend_confirmed')return;if(c('ge')('fbRequestsJewelLoading')){new (c('AsyncRequest'))().setURI('/ajax/requests/loader/').send();return;}var p={};p.reloadcontent=true;new (c('AsyncRequest'))().setURI('/ajax/requests/loader/').setData(p).send();};m.prototype.$RequestsJewel10=function(n,o){'use strict';if(!o)return;var p=o.obj.from,q=o.obj.suggester,r=this.$RequestsJewel21(this.$RequestsJewel1[p]).type,s=r===19&&!q;if(!s&&(r||this.jewel.isOpen()))return;if(c('ge')('fbRequestsJewelLoading')){new (c('AsyncRequest'))().setURI('/ajax/requests/loader/').send();}else{var t={};t.reloadcontent=true;new (c('AsyncRequest'))().setURI('/ajax/requests/loader/').setData(t).send();}};m.prototype.$RequestsJewel12=function(n,o){'use strict';if(!o||this.jewel.isOpen()||c('ge')('fbRequestsJewelLoading')!==null)return;var p=this.$RequestsJewel1[o.obj.from],q=p&&c('ge')(p);if(q){if(c('CSS').hasClass(q,'jewelItemNew')){this.$RequestsJewel24();c('Arbiter').inform('jewel/count-updated',{jewel:'requests',count:this.countNew});}if(!c('CSS').hasClass(q,'jewelItemResponded')){c('DOM').remove(q);delete this.$RequestsJewel1[o.obj.from];--this.$RequestsJewel2;this.$RequestsJewel22();}}};m.prototype.$RequestsJewel4=function(){'use strict';this.jewel.markSeen();this.$RequestsJewel26();};m.prototype.$RequestsJewel5=function(n,o){'use strict';var p=c('DOM').scry(this.jewelFlyout,'li');new (c('AsyncSignal'))('/ajax/gigaboxx/endpoint/UpdateLastSeenTime.php',{folder:this.folder,first_item:p[0].id}).send();var q=typeof n!='undefined'&&typeof o!='undefined'?{requester:n,type:o}:{};this.doNewMarkRead&&new (c('AsyncSignal'))('/ajax/requests/mark_read/',q).send();};m.prototype.$RequestsJewel13=function(n,o){'use strict';c('Arbiter').inform('jewel/count-updated',{jewel:'requests',count:0});};m.prototype.$RequestsJewel26=function(n,o){'use strict';c('DOM').scry(this.jewel.root,'li.jewelItemNew').forEach(function(p){c('CSS').removeClass(p,'jewelItemNew');});};m.prototype.$RequestsJewel7=function(n,o){'use strict';this.countNew=o.count;c('CSS').conditionClass(this.jewelFlyout,'beeperUnread',this.countNew>0);c('CSS').conditionClass(this.jewelFlyoutCase,'showRequests',this.countNew>0);if(this.newCountSpan){var p=this.countNew==1?h._("{num} NUEVAS SOLICITUDES",[h.param('num',this.countNew)]):h._({"*":"{num} NUEVAS SOLICITUDES"},[h.param('num',this.countNew,[0])]);c('DOM').setContent(this.newCountSpan,p);}};m.prototype.$RequestsJewel22=function(){'use strict';c('DOM').scry(this.jewelFlyout,'li.empty').forEach(function(n){c('CSS').conditionShow(n,this.$RequestsJewel2<=0);}.bind(this));};m.prototype.$RequestsJewel8=function(){'use strict';c('Arbiter').inform('requestsJewel/opened');var n=c('ge')('fbRequestsJewelLoading'),o=this.$RequestsJewel25();if(!n&&!o){this.unhandledRequest=true;}else if(n){var p=Date.now();if(this.openTimestamp+5000<p){this.openTimestamp=p;new (c('AsyncRequest'))().setURI('/ajax/requests/loader/').setData({log_impressions:true}).send();}}else{var q=Object.keys(this.$RequestsJewel1);if(q.length>0)new (c('AsyncRequest'))().setURI('/friends/requests/log_impressions').setData({ids:q.join(','),ref:'jewel'}).send();}o&&c('ScrollableArea').poke(o);c('JewelQPLogging').onJewelOpened();};m.prototype.$RequestsJewel6=function(){'use strict';c('Arbiter').inform('requestsJewel/closed');this.$RequestsJewel26();};m.prototype.$RequestsJewel27=function(){'use strict';return Math.min(Math.max(c('Vector').getViewportDimensions().y-l,k),j);};m.prototype.$RequestsJewel14=function(){'use strict';if(this.$RequestsJewel25())new (c('Animation'))(this.$RequestsJewel25()).to('height',this.$RequestsJewel27()+'px').duration(100).go();};m.prototype.$RequestsJewel15=function(){'use strict';var n=c('DOM').scry(this.jewelFlyout,'li.friendBrowserListUnit'),o=c('Vector').getElementPosition(this.$RequestsJewel16,'viewport').y+c('Vector').getElementDimensions(this.$RequestsJewel16).y,p=n.length-1;while(p>this.$RequestsJewel3){var q=c('Vector').getElementPosition(n[p],'viewport').y;if(q>0&&q+c('Vector').getElementDimensions(n[p]).y<=o)break;p-=1;}var r=p;while(p>this.$RequestsJewel3){var s=c('DOM').find(n[p],'input.friendBrowserID'),t=parseInt(s.value,10),u={pymk_id:t,pymk_location:'pymk_jewel'};c('MarauderLogger').log('regular_pymk_imp',undefined,u);p-=1;}this.$RequestsJewel3=Math.max(this.$RequestsJewel3,r);};m.prototype.setHeight=function(){'use strict';this.$RequestsJewel25().style.height=this.$RequestsJewel27()+'px';};m.prototype.maybeLoadJewel=function(){'use strict';if(this.unhandledRequest){this.unhandledRequest=false;this.$RequestsJewel8();}};f.exports=m;},null);
__d('ChatInput.react',['Bootloader','ChatConfig','ContentState','CompositeDraftDecorator','DraftEditor.react','DraftModifier','EditorState','EmoticonSpan.react','React','ReactDOM','emptyFunction','getDefaultKeyBinding','getEntityMatcher','getVisibleValueForContentState','handleBeforeInputForEmoticon','handleSoftNewlineForEmoticon','insertEmoticonIntoEditorState','isSoftNewlineEvent','setImmediate'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('emptyFunction').thatReturnsNull,j=c('React').createClass({displayName:'ChatInput',propTypes:{blockStyleFn:h.func,initializeThingsWithInputFn:h.func,inputKeyDown:h.func,keyBindingFn:h.func,onBlur:h.func,onEscape:h.func,onFocus:h.func,onTab:h.func,resizeFn:h.func},getDefaultProps:function(){return {blockStyleFn:i,keyBindingFn:c('getDefaultKeyBinding')};},componentDidMount:function(){this._oldHeight=c('ReactDOM').findDOMNode(this).getBoundingClientRect().height;this.props.resizeFn(this._oldHeight);this.props.initializeThingsWithInputFn(c('ReactDOM').findDOMNode(this.refs.input),this.getValue);this.setState({triggeredWord:this.props.triggeredWord});},componentWillReceiveProps:function(k){if(this.state.triggeredWord!==k.triggeredWord)this.setState({triggeredWord:k.triggeredWord},this._updateDecorator);},componentDidUpdate:function(){c('setImmediate')(function(){var k=c('ReactDOM').findDOMNode(this).getBoundingClientRect().height;if(this._oldHeight!==k)this.props.resizeFn(k);this._oldHeight=k;}.bind(this));},getInitialState:function(){return {editorState:this._createEmptyEditorState()};},_createEmptyEditorState:function(){return c('EditorState').createWithContent(c('ContentState').createFromText(''),this._getDecorator());},resetState:function(){if(this.state.typeaheadReporter){this.state.typeaheadReporter.sessionEnd();this.state.typeaheadReporter.sessionStart();}this.setState({editorState:c('EditorState').moveFocusToEnd(this._createEmptyEditorState()),triggeredWord:null});},_updateDecorator:function(){var k=this._getDecorator();c('setImmediate')(function(){var l=c('EditorState').set(this.state.editorState,{decorator:k});this.setState({editorState:l});}.bind(this));},_getDecorator:function(){return new (c('CompositeDraftDecorator'))([{strategy:c('getEntityMatcher')(function(k){return k.getType()==='EMOTICON';}),component:c('EmoticonSpan.react')}]);},onChange:function(k){this.setState({editorState:k});},onReturn:function(event){if(c('isSoftNewlineEvent')(event)){var k=c('handleSoftNewlineForEmoticon')(this.state.editorState);if(k===this.state.editorState)return false;this.setState({editorState:k});return true;}this.props.inputKeyDown(event,this.getValue());return true;},getValueFromEditorState:function(k){var l=k.getCurrentContent();return c('getVisibleValueForContentState')(l);},getValue:function(){return this.getValueFromEditorState(this.state.editorState);},focus:function(){this.refs.input.focus();},_handleBeforeInput:function(k){var l=c('handleBeforeInputForEmoticon')(this.state.editorState,k);if(l===this.state.editorState)return false;this.setState({editorState:l});return true;},_handleFiles:function(k){var l=/^image\//,m=k.filter(function(n){return l.test(n.type);});if(m.length){this.props.uploadPhotoFn(m[0]);return true;}return false;},_handlePastedFiles:function(k){return this._handleFiles(k);},_handleDroppedFiles:function(k,l){return this._handleFiles(l);},insertEmoticon:function(k){var l=c('insertEmoticonIntoEditorState')(k,this.state.editorState);if(l!==this.state.editorState)this.setState({editorState:l});},appendText:function(k){var l=this.state.editorState,m=l.getSelection(),n=l.getCurrentContent();n=c('DraftModifier').insertText(n,m,k);l=c('EditorState').push(l,n,'insert-characters');this.setState({editorState:l});},render:function(){return (c('React').createElement(c('DraftEditor.react'),babelHelpers['extends']({ref:'input'},this.props,{editorState:this.state.editorState,onChange:this.onChange,handleBeforeInput:this._handleBeforeInput,handlePastedFiles:this._handlePastedFiles,handleDroppedFiles:this._handleDroppedFiles,handleReturn:this.onReturn,spellCheck:true,stripPastedStyles:true})));}});f.exports=j;},null);
__d('ChatTabTypeaheadDataSource',['MercuryConfig','MercuryTypeaheadConstants','MercuryTypeaheadDataSource'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('MercuryTypeaheadDataSource'));i=h&&h.prototype;function j(k){'use strict';k=k||{};k.maxResults=c('MercuryTypeaheadConstants').COMPOSER_CHATTAB_MAX;i.constructor.call(this,k);this.$ChatTabTypeaheadDataSource1=true;}j.prototype.buildData=function(k){'use strict';var l=[],m=[],n=[],o=[],p=[],q=[];k.forEach(function(s){var t=i.getEntry.call(this,s);switch(t.render_type){case c('MercuryTypeaheadConstants').FRIEND_TYPE:l.push(s);break;case c('MercuryTypeaheadConstants').THREAD_TYPE:if(this.$ChatTabTypeaheadDataSource1)m.push(s);break;case c('MercuryTypeaheadConstants').NON_FRIEND_TYPE:n.push(s);break;case c('MercuryTypeaheadConstants').FB4C_TYPE:o.push(s);break;case c('MercuryTypeaheadConstants').PAGE_TYPE:if(this.$ChatTabTypeaheadDataSource1)if(c('MercuryConfig').LinkedAgents&&c('MercuryConfig').LinkedAgents.indexOf(s.toString())>-1){q.push(s);}else p.push(s);break;default:this.logQuery({event:'chat_tab_render_type_error'});break;}},this);var r=q.concat(l,o,m,p,n);return i.buildData.call(this,r);};j.prototype.query=function(k,l,m,n){'use strict';this.logQuery({event:'query_chat_tab',query:k});return i.query.call(this,k,l,m,n);};j.prototype.respond=function(k,l,m){'use strict';var n=i.respond.call(this,k,l,m);this.logResponse({event:'query_response_chat_tab',response_query:k,response_uids:l});return n;};j.prototype.setShowThreads=function(k){'use strict';this.$ChatTabTypeaheadDataSource1=k;};f.exports=j;},null);
__d('SyncRequestNotificationBeeperItemContents.react',['cx','Animation','Image.react','ImageBlock.react','NotificationBeeperItemCloseButton.react','NotificationUserActions','React','ReactDOM','SyncRequest.react','SyncRequestStatusEnum'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').createClass({displayName:'SyncRequestNotificationBeeperItemContents',_markAsRead:function(){c('NotificationUserActions').markNotificationsAsRead([this.props.beep.notificationID]);this.props.onHide();},_onClose:function(){this._markAsRead();this.props.onHide();},_doFlash:function(){new (c('Animation'))(c('ReactDOM').findDOMNode(this.refs.inner)).from('opacity','0').to('opacity','1').duration(200).go();},componentDidMount:function(){if(this.props.beep.rendererData.status!=c('SyncRequestStatusEnum').PENDING)this.props.onReadyToHide(this.props.beep.notificationID);},componentDidUpdate:function(j){if(this.props.beep.rendererData.status!=c('SyncRequestStatusEnum').PENDING&&j.beep.rendererData.status==c('SyncRequestStatusEnum').PENDING)this.props.onReadyToHide(this.props.beep.notificationID);},onRequestStatusUpdate:function(j,k){if(j!=c('SyncRequestStatusEnum').PENDING&&k==c('SyncRequestStatusEnum').PENDING)this.props.onReadyToHide(this.props.beep.notificationID);},render:function(){var j=this.props.beep,k=j.rendererData;return (c('React').createElement('div',{ref:'inner'},c('React').createElement(c('NotificationBeeperItemCloseButton.react'),{onClick:this._onClose}),c('React').createElement(c('ImageBlock.react'),{className:"_3soj"},c('React').createElement(c('Image.react'),{src:j.actors[0].profile_picture.uri,className:"_3sok"}),c('React').createElement('div',{className:"_3sol"},c('React').createElement(c('SyncRequest.react'),{app:k.app,creationTime:k.creation_time,requestId:k.id.toString(),receiver:k.receiver,sender:k.sender,status:k.status,timeout:k.timeout,timeRemaining:k.time_remaining,viewerId:k.receiver.id,onStatusUpdate:this.onRequestStatusUpdate})))));}});f.exports=i;},null);
__d('LiveMessageReceiver',['Arbiter','ChannelConstants','emptyFunction','shield'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){this.eventName=i;this.subs=null;this.handler=c('emptyFunction');this.shutdownHandler=null;this.registered=false;this.appId=1;}Object.assign(h,{getAppMessageType:function(i,j){return 'live_message/'+i+':'+j;},route:function(i){var j=function(k){var l=h.getAppMessageType(i.app_id,i.event_name);c('Arbiter').inform(l,k,c('Arbiter').BEHAVIOR_PERSISTENT);};j(i.response);}});Object.assign(h.prototype,{setAppId:function(i){this.appId=i;return this;},setHandler:function(i){this.handler=i;this._dirty();return this;},setRestartHandler:c('emptyFunction'),setShutdownHandler:function(i){this.shutdownHandler=c('shield')(i);this._dirty();return this;},_dirty:function(){if(this.registered){this.unregister();this.register();}},register:function(){var i=function(k,l){return this.handler(l);}.bind(this),j=h.getAppMessageType(this.appId,this.eventName);this.subs={};this.subs.main=c('Arbiter').subscribe(j,i);if(this.shutdownHandler)this.subs.shut=c('Arbiter').subscribe(c('ChannelConstants').ON_SHUTDOWN,this.shutdownHandler);this.registered=true;return this;},unregister:function(){if(!this.subs)return this;for(var i in this.subs)if(this.subs[i])this.subs[i].unsubscribe();this.subs=null;this.registered=false;return this;}});f.exports=h;},null);
__d('initLiveMessageReceiver',['Arbiter','ChannelConstants','LiveMessageReceiver'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('app_msg'),function(h,i){c('LiveMessageReceiver').route(i.obj);});},null);